<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Prénom Nom" />

<meta name="date" content="2021-04-15" />

<title>Mini-projet 2021 - Exploration des données de Pavkovic</title>

<script src="Prenom-NOM_m3-stat-R_mini-projet_files/header-attrs-2.5/header-attrs.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="Prenom-NOM_m3-stat-R_mini-projet_files/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="Prenom-NOM_m3-stat-R_mini-projet_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/navigation-1.1/tabsets.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/navigation-1.1/codefolding.js"></script>
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/navigation-1.1/sourceembed.js"></script>
<link href="Prenom-NOM_m3-stat-R_mini-projet_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="Prenom-NOM_m3-stat-R_mini-projet_files/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Mini-projet 2021 - Exploration des données de Pavkovic</h1>
<h4 class="author">Prénom Nom</h4>
<h4 class="date">2021-04-15</h4>

</div>


<div id="synopsis-du-projet" class="section level2">
<h2>Synopsis du projet</h2>
<p>Le but du projet est de mettre en oeuvre les méthodes vues dans le module 3 “R et statistiques” pour explorer le jeu de données de Pavokovic, et de fournir un rapport d’analyse au format R markdown.</p>
<p>Nous fournissons ci-dessous une trame avec les principales sections attendus. Sentez-vous libres d’adapter cette trame ou d’y ajouter des analyses complémentaires si elles vous aident à interpréter vos résultats.</p>
</div>
<div id="remise-du-rapport" class="section level2">
<h2>Remise du rapport</h2>
<p>Date: <strong>le 10 mai 2021 minuit</strong>. Si vous anticipez un problème pour remettre le rapport à cette date contactez-nous aussi rapidement que possible pour que nous puissions prévoir une remise plus tardive.</p>
<ul>
<li><p>Commencez par renommer le fichier Rmd en remplaçant Prenom-NOM par vos nom et prénom.</p></li>
<li><p>Le rapport est attendu en formats Rmd + HTML (en activant l’option self_contained de l’en-tête).</p></li>
<li><p>Déposez les fichiers dans un sous-dossier de vote compte du cluster. Attention, veillez à respecter précisément cette structure de chemin car nous nous baserons dessus pour récupérer vos résultats.</p>
<p><code>/shared/projects/dubii2021/[login]/m3-stat-R/mini-projet</code></p></li>
</ul>
</div>
<div id="critères-dévaluation" class="section level2">
<h2>Critères d’évaluation</h2>
<ul>
<li>Reproductibilité des analyses: nous tenterons de regénérer le rapport HTML à partir de votre Rmd, en partant de notre compte sur le serveur IFB.</li>
<li>Manipulation des objets R</li>
<li>Mobilisation des méthodes statistiques vues au cours</li>
<li>Pertinence des interprétations statistiques</li>
<li>Pertinence des interprétations biologiques</li>
<li>Clarté de la rédaction</li>
<li>Clarté des illustrations (figures et tableaux): graphismes, légendes …</li>
</ul>
<p>Nous vous encourageons à assurer la lisibilpité de votre code (syntaxe, nommage des variables, commentaires de code)</p>
</div>
<div id="chargement-des-données-brutes" class="section level2">
<h2>Chargement des données brutes</h2>
<p>Le bloc suivant contient une fonction qui permet de télécharger un fichier dans l’espace de travail, sauf s’il est déjà présent. Nous l’utiliserons ensuite pour télécharger les données à analyser en évitant de refaire le transfert à chaque exécution de l’analyse.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @title Download a file only if it is not yet here</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @author Jacques van Helden email{Jacques.van-Helden@@france-bioinformatique.fr}</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param url_base base of the URL, that will be prepended to the file name</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param file_name name of the file (should not contain any path)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param local_folder path of a local folder where the file should be stored</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return the function returns the path of the local file, built from local_folder and file_name</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @export©</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>download_only_once <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  url_base, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  file_name,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  local_folder) {</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Define the source URL  </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="fu">file.path</span>(url_base, file_name)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Source URL</span><span class="sc">\n\t</span><span class="st">&quot;</span>,  url)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Define the local file</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  local_file <span class="ot">&lt;-</span> <span class="fu">file.path</span>(local_folder, file_name)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Create the local data folder if it does not exist</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dir.create</span>(local_folder, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Download the file ONLY if it is not already there</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(local_file)) {</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Downloading file from source URL to local file</span><span class="sc">\n\t</span><span class="st">&quot;</span>, </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>            local_file)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(<span class="at">url =</span> url, <span class="at">destfile =</span> local_file)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">&quot;Local file already exists, no need to download</span><span class="sc">\n\t</span><span class="st">&quot;</span>, </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>            local_file)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(local_file)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Nous téléchargeons deux fichiers dans un dossier local, et les chargeons dans les data.frames suivantes:</p>
<ul>
<li>Données brutes de transcriptome: <code>fa_expr_raw</code></li>
<li>Métadonnées: <code>fa_meta</code></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Define the remote URL and local folder</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pavkovic_url <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/DU-Bii/module-3-Stat-R/raw/master/stat-R_2021/data/pavkovic_2019/&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Define the local folder for this analysis (where the data will be downloaded and the results generated)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>pavkovic_folder <span class="ot">&lt;-</span> <span class="st">&quot;~/m3-stat-R/pavkovic_analysis&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Define a sub-folder for the data</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>pavkovic_data_folder <span class="ot">&lt;-</span> <span class="fu">file.path</span>(pavkovic_folder, <span class="st">&quot;data&quot;</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Download and load the expression data table</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Note: we use check.names=FALSE to avoid replacing hyphens by dots</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="do">## in sample names, because we want to keep them as in the </span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="do">## original data files. </span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Downloading FA transcriptome file</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="st">&quot;fa_raw_counts.tsv.gz&quot;</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;</span><span class="sc">\n\t</span><span class="st">from</span><span class="sc">\t</span><span class="st">&quot;</span>, pavkovic_url)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>fa_expr_file <span class="ot">&lt;-</span> <span class="fu">download_only_once</span>(</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">url_base =</span> pavkovic_url, </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_name =</span> <span class="st">&quot;fa_raw_counts.tsv.gz&quot;</span>,</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">local_folder =</span> pavkovic_data_folder)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Load the expresdsion table</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Loading FA transcriptome data from</span><span class="sc">\n\t</span><span class="st">&quot;</span>, fa_expr_file)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>fa_expr_raw <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="at">file =</span> fa_expr_file, </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>                       <span class="at">header =</span> <span class="cn">TRUE</span>, </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>                       <span class="at">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co"># colnames(fa_expr_raw)</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a><span class="co"># dim(fa_expr_raw)</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="co"># View(head(fa_expr_raw))</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="do">## Download the metadata file</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Downloading FA metadata file</span><span class="sc">\t</span><span class="st">&quot;</span>, <span class="st">&quot;fa_transcriptome_metadata.tsv&quot;</span>,</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;</span><span class="sc">\n\t</span><span class="st">from</span><span class="sc">\t</span><span class="st">&quot;</span>, pavkovic_url)</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>fa_meta_file <span class="ot">&lt;-</span> <span class="fu">download_only_once</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">url_base =</span> pavkovic_url, </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_name =</span> <span class="st">&quot;fa_transcriptome_metadata.tsv&quot;</span>,</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">local_folder =</span> pavkovic_data_folder)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a><span class="do">## Load the metadata</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Loading FA metadata from</span><span class="sc">\n\t</span><span class="st">&quot;</span>, fa_meta_file)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>fa_meta <span class="ot">&lt;-</span> <span class="fu">read.delim</span>(<span class="at">file =</span> fa_meta_file, </span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>                       <span class="at">header =</span> <span class="cn">TRUE</span>, </span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>                       <span class="at">row.names =</span> <span class="dv">1</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="co"># View(fa_meta)</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(fa_meta, <span class="at">caption =</span> <span class="st">&quot;Metdata for Pavkovoc FA transcriptome&quot;</span>)</span></code></pre></div>
<table>
<caption>Metdata for Pavkovoc FA transcriptome</caption>
<thead>
<tr class="header">
<th align="left">dataType</th>
<th align="left">sampleName</th>
<th align="left">condition</th>
<th align="right">sampleNumber</th>
<th align="left">color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day14_1</td>
<td align="left">day14</td>
<td align="right">1</td>
<td align="left">#FF4400</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day14_2</td>
<td align="left">day14</td>
<td align="right">2</td>
<td align="left">#FF4400</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day14_3</td>
<td align="left">day14</td>
<td align="right">3</td>
<td align="left">#FF4400</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day1_1</td>
<td align="left">day1</td>
<td align="right">1</td>
<td align="left">#BBD7FF</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day1_2</td>
<td align="left">day1</td>
<td align="right">2</td>
<td align="left">#BBD7FF</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day1_3</td>
<td align="left">day1</td>
<td align="right">3</td>
<td align="left">#BBD7FF</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day2_1</td>
<td align="left">day2</td>
<td align="right">1</td>
<td align="left">#F0BBFF</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day2_2</td>
<td align="left">day2</td>
<td align="right">2</td>
<td align="left">#F0BBFF</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day2_3</td>
<td align="left">day2</td>
<td align="right">3</td>
<td align="left">#F0BBFF</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day3_1</td>
<td align="left">day3</td>
<td align="right">1</td>
<td align="left">#FFFFDD</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day3_2</td>
<td align="left">day3</td>
<td align="right">2</td>
<td align="left">#FFFFDD</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day3_3</td>
<td align="left">day3</td>
<td align="right">3</td>
<td align="left">#FFFFDD</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day7_1</td>
<td align="left">day7</td>
<td align="right">1</td>
<td align="left">#FFDD88</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">day7_2</td>
<td align="left">day7</td>
<td align="right">2</td>
<td align="left">#FFDD88</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">day7_3</td>
<td align="left">day7</td>
<td align="right">3</td>
<td align="left">#FFDD88</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">normal_1</td>
<td align="left">normal</td>
<td align="right">1</td>
<td align="left">#BBFFBB</td>
</tr>
<tr class="odd">
<td align="left">transcriptome</td>
<td align="left">normal_2</td>
<td align="left">normal</td>
<td align="right">2</td>
<td align="left">#BBFFBB</td>
</tr>
<tr class="even">
<td align="left">transcriptome</td>
<td align="left">normal_3</td>
<td align="left">normal</td>
<td align="right">3</td>
<td align="left">#BBFFBB</td>
</tr>
</tbody>
</table>
</div>
<div id="transformation-log2" class="section level2">
<h2>Transformation log2</h2>
<p>Appliquez une transformation log2 des données brutes, après avoir ajouté un epsilon <span class="math inline">\(\epsilon = 1\)</span> (les valeurs nulles seront donc représentées par un log2(counts) valant <span class="math inline">\(0\)</span>. Stockez le résultat dans une data.frame nommée <code>fa_expr_log2</code>.</p>
<p>Affchez un fragment des tableaux <code>fa_expr_raw</code> et <code>fa_expr_log2</code> en sélectionnant les lignes 100 à 109 et les colonnes 5 à 10, afin de vous assurer que la transformation log2 a bien fonctionné.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Log2 transformation of the transcriptome data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>epsilon <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>fa_expr_log2 <span class="ot">&lt;-</span> <span class="fu">log2</span>(fa_expr_raw <span class="sc">+</span> epsilon)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dim(fa_expr_log2)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># View(head(fa_expr_log2))</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Display of a fragment of the data before and after log2 transformation</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(fa_expr_raw[<span class="dv">100</span><span class="sc">:</span><span class="dv">109</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">caption =</span> <span class="st">&quot;Fragment des données transcriptomiques brutes&quot;</span>)</span></code></pre></div>
<table style="width:100%;">
<caption>Fragment des données transcriptomiques brutes</caption>
<colgroup>
<col width="21%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="12%" />
<col width="12%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">day14_2</th>
<th align="right">day14_3</th>
<th align="right">day2_1</th>
<th align="right">day2_2</th>
<th align="right">day2_3</th>
<th align="right">day3_1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ENSMUSG00000000567</td>
<td align="right">51.004801</td>
<td align="right">177.973522</td>
<td align="right">1052.689447</td>
<td align="right">106.995584</td>
<td align="right">347.13842</td>
<td align="right">479.59911</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000568</td>
<td align="right">871.981145</td>
<td align="right">530.136492</td>
<td align="right">818.257157</td>
<td align="right">116.136417</td>
<td align="right">3406.45030</td>
<td align="right">766.09722</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000579</td>
<td align="right">728.517368</td>
<td align="right">468.254668</td>
<td align="right">473.399472</td>
<td align="right">36.258005</td>
<td align="right">410.57787</td>
<td align="right">347.05054</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000581</td>
<td align="right">488.131157</td>
<td align="right">510.212365</td>
<td align="right">546.260344</td>
<td align="right">87.788535</td>
<td align="right">319.12679</td>
<td align="right">461.45732</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000594</td>
<td align="right">2331.419915</td>
<td align="right">1663.654899</td>
<td align="right">2283.051270</td>
<td align="right">1115.588250</td>
<td align="right">1491.61384</td>
<td align="right">1576.68451</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000600</td>
<td align="right">2021.209338</td>
<td align="right">2405.746829</td>
<td align="right">3674.188108</td>
<td align="right">589.840068</td>
<td align="right">1399.10751</td>
<td align="right">3446.01856</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000605</td>
<td align="right">235.765748</td>
<td align="right">293.247867</td>
<td align="right">489.579657</td>
<td align="right">77.008213</td>
<td align="right">256.00200</td>
<td align="right">282.80077</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000606</td>
<td align="right">1.978342</td>
<td align="right">3.749163</td>
<td align="right">3.970399</td>
<td align="right">0.000000</td>
<td align="right">138.48677</td>
<td align="right">0.00000</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000617</td>
<td align="right">11.780528</td>
<td align="right">22.842788</td>
<td align="right">30.228506</td>
<td align="right">6.670500</td>
<td align="right">18.27493</td>
<td align="right">13.41152</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000627</td>
<td align="right">3.099033</td>
<td align="right">9.776030</td>
<td align="right">46.297517</td>
<td align="right">2.878275</td>
<td align="right">17.03638</td>
<td align="right">15.45854</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(fa_expr_log2[<span class="dv">100</span><span class="sc">:</span><span class="dv">109</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>], <span class="at">caption =</span> <span class="st">&quot;Fragment des données transcriptomiques après transformation log2&quot;</span>)</span></code></pre></div>
<table>
<caption>Fragment des données transcriptomiques après transformation log2</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">day14_2</th>
<th align="right">day14_3</th>
<th align="right">day2_1</th>
<th align="right">day2_2</th>
<th align="right">day2_3</th>
<th align="right">day3_1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ENSMUSG00000000567</td>
<td align="right">5.700573</td>
<td align="right">7.483602</td>
<td align="right">10.041234</td>
<td align="right">6.754829</td>
<td align="right">8.443517</td>
<td align="right">8.908690</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000568</td>
<td align="right">9.769807</td>
<td align="right">9.052939</td>
<td align="right">9.678173</td>
<td align="right">6.872046</td>
<td align="right">11.734477</td>
<td align="right">9.583266</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000579</td>
<td align="right">9.510798</td>
<td align="right">8.874227</td>
<td align="right">8.889959</td>
<td align="right">5.219479</td>
<td align="right">8.685022</td>
<td align="right">8.443153</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000581</td>
<td align="right">8.934078</td>
<td align="right">8.997779</td>
<td align="right">9.096084</td>
<td align="right">6.472302</td>
<td align="right">8.322500</td>
<td align="right">8.853176</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000594</td>
<td align="right">11.187612</td>
<td align="right">10.701007</td>
<td align="right">11.157379</td>
<td align="right">10.124882</td>
<td align="right">10.543625</td>
<td align="right">10.623593</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000600</td>
<td align="right">10.981717</td>
<td align="right">11.232869</td>
<td align="right">11.843602</td>
<td align="right">9.206624</td>
<td align="right">10.451322</td>
<td align="right">11.751133</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000605</td>
<td align="right">7.887317</td>
<td align="right">8.200888</td>
<td align="right">8.938344</td>
<td align="right">6.285554</td>
<td align="right">8.005636</td>
<td align="right">8.148735</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000606</td>
<td align="right">1.574509</td>
<td align="right">2.247673</td>
<td align="right">2.313362</td>
<td align="right">0.000000</td>
<td align="right">7.123984</td>
<td align="right">0.000000</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000617</td>
<td align="right">3.675876</td>
<td align="right">4.575481</td>
<td align="right">4.964792</td>
<td align="right">2.939321</td>
<td align="right">4.268654</td>
<td align="right">3.849151</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000627</td>
<td align="right">2.035284</td>
<td align="right">3.429754</td>
<td align="right">5.563693</td>
<td align="right">1.955415</td>
<td align="right">4.172838</td>
<td align="right">4.040765</td>
</tr>
</tbody>
</table>
</div>
<div id="statistiques-descriptives" class="section level2">
<h2>Statistiques descriptives</h2>
<p>Nous vous demandons de créer un data.frame qui collectera les statistiques par gène et par échantillon.</p>
<div id="claire-prépare-les-questions" class="section level3">
<h3>(Claire): prépare les questions</h3>
</div>
<div id="statistiques-par-échantillon-avant-normalisation" class="section level3">
<h3>Statistiques par échantillon avant normalisation</h3>
<p>Créez une data.frame nommée <code>gene_stat_prenorm</code> qui comportera une ligne par gène et une colonne par statistique, et calculez les statistiques suivantes sur les valeurs log2 de chaque gène.</p>
<ul>
<li>moyenne</li>
<li>médiane</li>
<li>écart-type</li>
<li>premier quartile</li>
<li>troisième quartile</li>
<li>maximum</li>
<li>nombre de valeurs nulles</li>
<li>intervalle inter-quartiles</li>
</ul>
<p>Ces résultats seront sotckés dans un data.frame avec 1 ligne par échantillon et 1 colonne par statistique, qui sera affiché avec la fonction <code>kable()</code> (n’oubliez pas la légende).</p>
<p>Affichez les lignes 100 à 109 de ce tableau de statistiques.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Gene-wise statistics before normalisation</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>gene_stat_prenorm <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, mean),</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">median =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, median),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, sd),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q1 =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, quantile, <span class="at">p =</span> <span class="fl">0.25</span>),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q3 =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, quantile, <span class="at">p =</span> <span class="fl">0.75</span>),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">max =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, max),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">null =</span> <span class="fu">apply</span>(fa_expr_raw <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, sum),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">iqr =</span> <span class="fu">apply</span>(fa_expr_raw, <span class="dv">1</span>, IQR)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(gene_stat_prenorm[<span class="dv">100</span><span class="sc">:</span><span class="dv">109</span>, ], <span class="at">caption =</span> <span class="st">&quot;Gene-wise statistics before normalisation.&quot;</span>)</span></code></pre></div>
<table style="width:100%;">
<caption>Gene-wise statistics before normalisation.</caption>
<colgroup>
<col width="17%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="11%" />
<col width="10%" />
<col width="10%" />
<col width="4%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">mean</th>
<th align="right">median</th>
<th align="right">sd</th>
<th align="right">Q1</th>
<th align="right">Q3</th>
<th align="right">max</th>
<th align="right">null</th>
<th align="right">iqr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ENSMUSG00000000567</td>
<td align="right">320.336744</td>
<td align="right">261.659973</td>
<td align="right">286.399084</td>
<td align="right">91.046357</td>
<td align="right">455.40866</td>
<td align="right">1052.68945</td>
<td align="right">0</td>
<td align="right">364.362298</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000568</td>
<td align="right">857.348825</td>
<td align="right">711.096105</td>
<td align="right">694.432189</td>
<td align="right">575.571199</td>
<td align="right">858.55015</td>
<td align="right">3406.45030</td>
<td align="right">0</td>
<td align="right">282.978949</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000579</td>
<td align="right">422.075702</td>
<td align="right">447.572742</td>
<td align="right">162.290415</td>
<td align="right">340.417017</td>
<td align="right">498.14962</td>
<td align="right">728.51737</td>
<td align="right">0</td>
<td align="right">157.732606</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000581</td>
<td align="right">498.978227</td>
<td align="right">471.269224</td>
<td align="right">248.612029</td>
<td align="right">320.599085</td>
<td align="right">579.92342</td>
<td align="right">942.51104</td>
<td align="right">0</td>
<td align="right">259.324338</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000594</td>
<td align="right">2113.558334</td>
<td align="right">1868.718762</td>
<td align="right">1237.521694</td>
<td align="right">1400.226182</td>
<td align="right">2337.79729</td>
<td align="right">6408.96044</td>
<td align="right">0</td>
<td align="right">937.571105</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000600</td>
<td align="right">2299.978163</td>
<td align="right">2093.572929</td>
<td align="right">911.222891</td>
<td align="right">1719.874980</td>
<td align="right">3200.06756</td>
<td align="right">3674.18811</td>
<td align="right">0</td>
<td align="right">1480.192582</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000605</td>
<td align="right">325.552118</td>
<td align="right">282.608205</td>
<td align="right">169.456624</td>
<td align="right">221.735904</td>
<td align="right">417.61546</td>
<td align="right">791.31256</td>
<td align="right">0</td>
<td align="right">195.879561</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000606</td>
<td align="right">9.929258</td>
<td align="right">1.934744</td>
<td align="right">32.151350</td>
<td align="right">1.178311</td>
<td align="right">3.91509</td>
<td align="right">138.48677</td>
<td align="right">4</td>
<td align="right">2.736779</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000617</td>
<td align="right">18.804116</td>
<td align="right">18.150391</td>
<td align="right">9.470819</td>
<td align="right">12.188276</td>
<td align="right">25.84298</td>
<td align="right">36.00235</td>
<td align="right">0</td>
<td align="right">13.654701</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000627</td>
<td align="right">15.623306</td>
<td align="right">10.064895</td>
<td align="right">14.341852</td>
<td align="right">4.780913</td>
<td align="right">17.08904</td>
<td align="right">46.29752</td>
<td align="right">0</td>
<td align="right">12.308127</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="filtrage-et-normalisation-des-données" class="section level2">
<h2>Filtrage et normalisation des données</h2>
<p>Nous fournissons ci-dessous le code pour normaliser les données, en standardisant le 3ème quantile.</p>
<p>La méthode choisie ici consiste à</p>
<ul>
<li><p>écarter les gènes “non-détectés”, c’est -à-dire ceux ayant des valeurs nulles dans au moins 90% des échantillons;</p></li>
<li><p>écarter les gènes à peine exprimés, c’est-à-dire ceux ayant une valeur moyenne &lt; 10 (arbitrairement);</p></li>
<li><p>standardiser les échantillons sur le 3ème quartile des valeurs non-nulles. Nous vous rappelons que d’autres méthodes plus élaborées ont été vues dans les modules 4 et 5, mais nous avons choisi ici une solution simple tout en étant robuste.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Data filtering: genes having at least 90% null values</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>undetected_genes <span class="ot">&lt;-</span> gene_stat_prenorm<span class="sc">$</span>null <span class="sc">&gt;=</span> <span class="fu">ncol</span>(fa_expr_raw) <span class="sc">*</span> <span class="fl">0.9</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Undetected genes (null in &gt;= 90% samples): &quot;</span>, <span class="fu">sum</span>(undetected_genes)))</span></code></pre></div>
<pre><code>[1] &quot;Undetected genes (null in &gt;= 90% samples): 14380&quot;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Data filtering: genes having a mean expression &lt; 10</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>barely_expressed_genes <span class="ot">&lt;-</span> gene_stat_prenorm<span class="sc">$</span>mean <span class="sc">&lt;</span> <span class="dv">10</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Barely expressed genes (mean &lt; 10): &quot;</span>, <span class="fu">sum</span>(barely_expressed_genes)))</span></code></pre></div>
<pre><code>[1] &quot;Barely expressed genes (mean &lt; 10): 26286&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Apply filtering on both criteria</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>discarded_genes <span class="ot">&lt;-</span> undetected_genes <span class="sc">|</span> barely_expressed_genes</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Discarded genes: &quot;</span>, <span class="fu">sum</span>(discarded_genes)))</span></code></pre></div>
<pre><code>[1] &quot;Discarded genes: 26288&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>kept_genes <span class="ot">&lt;-</span> <span class="sc">!</span>discarded_genes</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Kept genes: &quot;</span>, <span class="fu">sum</span>(kept_genes)))</span></code></pre></div>
<pre><code>[1] &quot;Kept genes: 20391&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Genes after filtering</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>fa_expr_log2_filtered <span class="ot">&lt;-</span> fa_expr_log2[kept_genes, ]</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Generate a data frame where null values are replaced by NA</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>fa_expr_nonull <span class="ot">&lt;-</span> fa_expr_log2_filtered</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>fa_expr_nonull[fa_expr_log2_filtered <span class="sc">&lt;=</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(fa_expr_nonull))</span></code></pre></div>
<pre><code>[1] 5598</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Compute the 3rd quartile of non-null values for each sample</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>sample_q3_nonull <span class="ot">&lt;-</span> <span class="fu">apply</span>(fa_expr_nonull, <span class="dv">2</span>, quantile, <span class="at">prob =</span> <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(sample_q3_nonull)</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Compute the A3 for all the values, which will serve as target value for the standardised sample Q3</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>all_q3_nonull <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="fu">unlist</span>(fa_expr_nonull), <span class="at">prob =</span> <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># print(all_q3_nonull)</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Standardise expression on  the third quartile of non-null values</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Beware : for this standardization we keep the null values</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Trick : I transpose the table to apply the ratio sample per sample, </span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="do">## and then transpose the result to get the genes in rows and samples in columns</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>fa_expr_log2_standard <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">t</span>(fa_expr_log2_filtered) <span class="sc">/</span> sample_q3_nonull <span class="sc">*</span> all_q3_nonull)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># quantile(unlist(fa_expr_log2_standard), probs = 0.75, na.rm = TRUE)</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="do">## I also compute the values for the &quot;nonull&quot; table for </span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="do">## the sake of comparison and to check that the third quantiles of non-null </span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="do">## values are well identical across samples.</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>fa_expr_log2_standard_nonull <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">t</span>(fa_expr_nonull) <span class="sc">/</span> sample_q3_nonull <span class="sc">*</span> all_q3_nonull)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co"># quantile(unlist(fa_expr_log2_standard_nonull), probs = 0.75, na.rm = TRUE)</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Compute 3 before and after standardisation, including or not the null values</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>standardisation_impact <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">before_all =</span> <span class="fu">apply</span>(fa_expr_log2_filtered, <span class="dv">2</span>, quantile, <span class="at">prob =</span>  <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">before_nonull =</span> <span class="fu">apply</span>(fa_expr_nonull, <span class="dv">2</span>, quantile, <span class="at">prob =</span>  <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">after_nonul =</span> <span class="fu">apply</span>(fa_expr_log2_standard_nonull, <span class="dv">2</span>, quantile, <span class="at">prob =</span>  <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">after_all =</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">2</span>, quantile, <span class="at">prob =</span>  <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="do">## Note: after standardization the Q3 of the data we will use show some variations </span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="do">## because we compute them here with the null values</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(standardisation_impact, <span class="at">caption =</span> <span class="st">&quot;Impact of standardization on the third quantile (Q3) per sample. Third quantiles are computed before and after standardisation, with either all the values of the filtered table, or only the non-null values. &quot;</span>)</span></code></pre></div>
<table>
<caption>Impact of standardization on the third quantile (Q3) per sample. Third quantiles are computed before and after standardisation, with either all the values of the filtered table, or only the non-null values.</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">before_all</th>
<th align="right">before_nonull</th>
<th align="right">after_nonul</th>
<th align="right">after_all</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">day1_1</td>
<td align="right">8.275875</td>
<td align="right">8.310843</td>
<td align="right">8.546124</td>
<td align="right">8.510165</td>
</tr>
<tr class="even">
<td align="left">day1_2</td>
<td align="right">9.215737</td>
<td align="right">9.236819</td>
<td align="right">8.546124</td>
<td align="right">8.526618</td>
</tr>
<tr class="odd">
<td align="left">day1_3</td>
<td align="right">9.339495</td>
<td align="right">9.356787</td>
<td align="right">8.546124</td>
<td align="right">8.530330</td>
</tr>
<tr class="even">
<td align="left">day14_1</td>
<td align="right">8.181662</td>
<td align="right">8.194184</td>
<td align="right">8.546124</td>
<td align="right">8.533064</td>
</tr>
<tr class="odd">
<td align="left">day14_2</td>
<td align="right">8.339087</td>
<td align="right">8.364105</td>
<td align="right">8.546124</td>
<td align="right">8.520562</td>
</tr>
<tr class="even">
<td align="left">day14_3</td>
<td align="right">8.313689</td>
<td align="right">8.334105</td>
<td align="right">8.546124</td>
<td align="right">8.525188</td>
</tr>
<tr class="odd">
<td align="left">day2_1</td>
<td align="right">9.372222</td>
<td align="right">9.391459</td>
<td align="right">8.546124</td>
<td align="right">8.528618</td>
</tr>
<tr class="even">
<td align="left">day2_2</td>
<td align="right">6.401122</td>
<td align="right">6.563217</td>
<td align="right">8.546124</td>
<td align="right">8.335056</td>
</tr>
<tr class="odd">
<td align="left">day2_3</td>
<td align="right">8.428494</td>
<td align="right">8.462042</td>
<td align="right">8.546124</td>
<td align="right">8.512242</td>
</tr>
<tr class="even">
<td align="left">day3_1</td>
<td align="right">8.600914</td>
<td align="right">8.618327</td>
<td align="right">8.546124</td>
<td align="right">8.528857</td>
</tr>
<tr class="odd">
<td align="left">day3_2</td>
<td align="right">8.449052</td>
<td align="right">8.476090</td>
<td align="right">8.546124</td>
<td align="right">8.518862</td>
</tr>
<tr class="even">
<td align="left">day3_3</td>
<td align="right">8.929730</td>
<td align="right">8.945829</td>
<td align="right">8.546124</td>
<td align="right">8.530744</td>
</tr>
<tr class="odd">
<td align="left">day7_1</td>
<td align="right">8.637420</td>
<td align="right">8.652095</td>
<td align="right">8.546124</td>
<td align="right">8.531628</td>
</tr>
<tr class="even">
<td align="left">day7_2</td>
<td align="right">8.457495</td>
<td align="right">8.478531</td>
<td align="right">8.546124</td>
<td align="right">8.524920</td>
</tr>
<tr class="odd">
<td align="left">day7_3</td>
<td align="right">8.568555</td>
<td align="right">8.585032</td>
<td align="right">8.546124</td>
<td align="right">8.529721</td>
</tr>
<tr class="even">
<td align="left">normal_1</td>
<td align="right">7.892971</td>
<td align="right">7.929471</td>
<td align="right">8.546124</td>
<td align="right">8.506785</td>
</tr>
<tr class="odd">
<td align="left">normal_2</td>
<td align="right">9.095259</td>
<td align="right">9.120100</td>
<td align="right">8.546124</td>
<td align="right">8.522846</td>
</tr>
<tr class="even">
<td align="left">normal_3</td>
<td align="right">7.690496</td>
<td align="right">7.728764</td>
<td align="right">8.546124</td>
<td align="right">8.503808</td>
</tr>
</tbody>
</table>
<div id="statistiques-par-gène-après-normalisation-et-annotation-des-gènes" class="section level3">
<h3>Statistiques par gène après normalisation, et annotation des gènes</h3>
<p>Générez un data.frame avec une ligne par gène à partir du tableau de données normalisées, avec les statistiques suivantes (une statistique par colonne):</p>
<ul>
<li>moyenne</li>
<li>écart-type</li>
<li>coefficient de variation</li>
<li>minimum</li>
<li>médiane</li>
<li>maximum</li>
</ul>
<p>Ajoutez une colonne avec les annotations biomart de chaque gène/</p>
<p>Affichez les lignes 100 à 109 de ce tableau de statistiques.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Stat per gene after normalisation</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Gene-wise statistics before normalisation</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>gene_stat_norm <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean =</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">1</span>, mean),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sd =</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">1</span>, sd))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>gene_stat_norm<span class="sc">$</span>V <span class="ot">=</span> gene_stat_norm<span class="sc">$</span>sd <span class="sc">/</span> gene_stat_norm<span class="sc">$</span>mean</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>gene_stat_norm<span class="sc">$</span>min <span class="ot">=</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">1</span>, min)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>gene_stat_norm<span class="sc">$</span>median <span class="ot">=</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">1</span>, median)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>gene_stat_norm<span class="sc">$</span>max <span class="ot">=</span> <span class="fu">apply</span>(fa_expr_log2_standard, <span class="dv">1</span>, max)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(gene_stat_norm[<span class="dv">100</span><span class="sc">:</span><span class="dv">109</span>, ], <span class="at">caption =</span> <span class="st">&quot;Gene-wise statistics after normalisation.&quot;</span>)</span></code></pre></div>
<table>
<caption>Gene-wise statistics after normalisation.</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">V</th>
<th align="right">min</th>
<th align="right">median</th>
<th align="right">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ENSMUSG00000000711</td>
<td align="right">9.938709</td>
<td align="right">0.9412004</td>
<td align="right">0.0947005</td>
<td align="right">9.232061</td>
<td align="right">9.727752</td>
<td align="right">13.292801</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000724</td>
<td align="right">5.595006</td>
<td align="right">0.4441668</td>
<td align="right">0.0793863</td>
<td align="right">4.816940</td>
<td align="right">5.632564</td>
<td align="right">6.426584</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000731</td>
<td align="right">4.936591</td>
<td align="right">0.7660500</td>
<td align="right">0.1551779</td>
<td align="right">3.715427</td>
<td align="right">4.984400</td>
<td align="right">6.247104</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000732</td>
<td align="right">5.543710</td>
<td align="right">1.6080743</td>
<td align="right">0.2900719</td>
<td align="right">2.534509</td>
<td align="right">5.736471</td>
<td align="right">8.250127</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000738</td>
<td align="right">8.426883</td>
<td align="right">0.5240653</td>
<td align="right">0.0621897</td>
<td align="right">7.477862</td>
<td align="right">8.330412</td>
<td align="right">9.484120</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000740</td>
<td align="right">10.820838</td>
<td align="right">0.3647941</td>
<td align="right">0.0337122</td>
<td align="right">10.156481</td>
<td align="right">10.850259</td>
<td align="right">11.622910</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000743</td>
<td align="right">7.619693</td>
<td align="right">1.0860052</td>
<td align="right">0.1425261</td>
<td align="right">6.110121</td>
<td align="right">7.398740</td>
<td align="right">10.866373</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000751</td>
<td align="right">7.368976</td>
<td align="right">0.7229245</td>
<td align="right">0.0981038</td>
<td align="right">5.984878</td>
<td align="right">7.241989</td>
<td align="right">9.010795</td>
</tr>
<tr class="odd">
<td align="left">ENSMUSG00000000753</td>
<td align="right">2.830650</td>
<td align="right">1.7230619</td>
<td align="right">0.6087160</td>
<td align="right">0.000000</td>
<td align="right">3.131414</td>
<td align="right">5.177214</td>
</tr>
<tr class="even">
<td align="left">ENSMUSG00000000759</td>
<td align="right">8.617902</td>
<td align="right">0.5502123</td>
<td align="right">0.0638453</td>
<td align="right">7.904374</td>
<td align="right">8.497898</td>
<td align="right">10.039692</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="distribution-des-données" class="section level2">
<h2>Distribution des données</h2>
<ul>
<li>Dessinez la distribution des valeurs après normalisation (tous échantillons confondus)</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(fa_expr_log2_standard), </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fu">max</span>(fa_expr_log2_standard) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;log2(counts) after standardisation&quot;</span>, </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;number of genes after filtering&quot;</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">&quot;#BBDDFF&quot;</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.axis =</span> <span class="fl">0.8</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;distribution after standardisation&quot;</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">v =</span> <span class="fu">mean</span>(fa_expr_log2_standard), <span class="at">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures/tcga-bic_fa_expr_norm_distrib-1.png" alt="Distribution of expression values (log2 counts) after gene filtering and standardisation on the sample-wise third-quartile of non-null values. The vertical line highlights the mean value. " width="70%" />
<p class="caption">
Distribution of expression values (log2 counts) after gene filtering and standardisation on the sample-wise third-quartile of non-null values. The vertical line highlights the mean value.
</p>
</div>
<ul>
<li>Dessinez un box plot des échantillons avant et après normalisation, et commentez la façon dont l’effet de la normalisation apparaît sur ces graphiques.</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Box plots to show normalisation impact ####</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">1</span>)) <span class="do">## Set the margins</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(fa_expr_log2_filtered, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">horizontal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;log2(counts)&quot;</span>, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">las =</span> <span class="dv">1</span>, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> fa_meta<span class="sc">$</span>color, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Before standardisation</span><span class="sc">\n</span><span class="st">all values&quot;</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(fa_expr_nonull, </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">horizontal =</span> <span class="cn">TRUE</span>, </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;log2(counts)&quot;</span>, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">las =</span> <span class="dv">1</span>, </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> fa_meta<span class="sc">$</span>color, </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Before standardisation</span><span class="sc">\n</span><span class="st">zeros discarded&quot;</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(fa_expr_log2_standard_nonull, </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">horizontal =</span> <span class="cn">TRUE</span>, </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;log2(counts)&quot;</span>, </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">las =</span> <span class="dv">1</span>, </span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> fa_meta<span class="sc">$</span>color, </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Standardised</span><span class="sc">\n</span><span class="st">zeros discarded&quot;</span>)</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(fa_expr_log2_standard, </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">xlab =</span> <span class="st">&quot;log2(counts)&quot;</span>, </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">las =</span> <span class="dv">1</span>, </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">horizontal =</span> <span class="cn">TRUE</span>, </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> fa_meta<span class="sc">$</span>color, </span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">main =</span> <span class="st">&quot;Standardised</span><span class="sc">\n</span><span class="st">all values&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures/tcga-bic_boxplots_standardisation_impact-1.png" alt="Box plots showing the impact of normalisation" width="100%" />
<p class="caption">
Box plots showing the impact of normalisation
</p>
</div>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">1</span>))</span></code></pre></div>
</div>
<div id="filtrage" class="section level2">
<h2>Filtrage</h2>
<p>Pour réduire le nombre de gènes, nous allons écarter les gènes faiblement exprimés (log2 moyen inférieur à 4), et ne retenir que ceux qui montrent des variations importantes entre échantillons. Pour ce dernier critère , nous nous baasons sur nle coefficient de variation, afin de relativiser la dispersion (écart type) par rapport à la tendance centrale (moyenne).</p>
<p>Sélectionnez les gènes ayant un niveau log2 moyen minimal supérieur à 3 (<span class="math inline">\(s &gt; 3\)</span>) et un coefficient de variation supérieur à 0.5 (<span class="math inline">\(V &gt; 0.5\)</span>). Note: ces valeurs sont parfaitement arbitraires, elles ont érté choisies pour obtenir un nombre raisonnable de gènes.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Gene selection ####</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Compute a Boolean vector indicating whether each gene passes or not the expression level threshold</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>high_expression <span class="ot">&lt;-</span> gene_stat_norm<span class="sc">$</span>mean <span class="sc">&gt;</span> <span class="dv">3</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># table(high_expression) # count number of genes with high/weak expression</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Compute a Boolean vector indicating whether each gene passes or not the variation coefficient threshold</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>high_variation <span class="ot">&lt;-</span> gene_stat_norm<span class="sc">$</span>V <span class="sc">&gt;</span> <span class="fl">0.5</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># table(high_variation) # count number of genes with weak high coeffficient of variation</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Select genes having both a high mean expression and a high variation coefficien</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>selected_genes <span class="ot">&lt;-</span> high_variation <span class="sc">&amp;</span> high_expression</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co"># table(selected_genes) # count number of genes with weak high coeffficient of variation</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;Selected genes: &quot;</span>, <span class="fu">sum</span>(selected_genes)))</span></code></pre></div>
<pre><code>[1] &quot;Selected genes: 501&quot;</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Create a data frame with the expression of the selected genes</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>fa_expr_selected <span class="ot">&lt;-</span> fa_expr_log2_standard[selected_genes, ]</span></code></pre></div>
<p>Dessinez des histogrammes des valeurs d’expression avant et après cette sélection de gènes, et commentez les différences.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Histograms of expression before and after gene selection ####</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(fa_expr_log2_standard), </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fu">max</span>(fa_expr_log2_standard) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Filtered genes&quot;</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span>  <span class="st">&quot;#DDBBFF&quot;</span>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(fa_expr_selected), </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fu">max</span>(fa_expr_log2_standard) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Selected genes&quot;</span>,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span>  <span class="st">&quot;#FFDDBB&quot;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures/tcga-bic_hist_expr_selected_genes-1.png" alt="Distribution of expression values before and after gene selection" width="60%" />
<p class="caption">
Distribution of expression values before and after gene selection
</p>
</div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ## Some quick checks: the selection of highly variable genes select those having many zeros - and high values in other samples</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># hist(unlist(fa_expr_log2_filtered[high_expression, ]), breaks=100)</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># hist(unlist(fa_expr_log2_filtered[high_variation, ]), breaks=100)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># hist(unlist(fa_expr_log2_filtered[!high_variation, ]), breaks=100)</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># hist(unlist(fa_expr_log2_filtered[selected_genes, ]), breaks=100)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Histogram of expression after gene selection ####</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(fa_expr_log2_standard), </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fu">max</span>(fa_expr_log2_standard) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.axis =</span> <span class="fl">0.7</span>, </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Filtered genes&quot;</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span>  <span class="st">&quot;#BBDDFF&quot;</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">unlist</span>(fa_expr_selected), </span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="fu">max</span>(fa_expr_log2_standard) <span class="sc">+</span> <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.25</span>),</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">las =</span> <span class="dv">1</span>, <span class="at">cex.axis =</span> <span class="fl">0.7</span>, </span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Selected genes&quot;</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span>  <span class="st">&quot;#88FFBB&quot;</span>)</span></code></pre></div>
<p><img src="figures/tcga-bic_boxplots_expr_selected_genes-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
</div>
<div id="acp" class="section level2">
<h2>ACP</h2>
<p>Dessinez un plot ACP des échantillons en les colorant par condition.</p>
<ul>
<li>avec la matrice d’expression initiale (<span class="math inline">\(fa_expr\)</span>)</li>
<li>avec la matrice finale (transformation log2, filtre des gènes non-détectés, standardisation et sélection des gènes fortement exprimés et a-à haut coefficient de variation)</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### PC plots ####</span></span></code></pre></div>
</div>
<div id="clustering" class="section level2">
<h2>Clustering</h2>
<ul>
<li><p>Calculez les matrices de distance entre échantillons, en utilisant respectivement les distances euclidienne, coefficient de Pearson et de Spearman.</p></li>
<li><p>Effectuez un clustering hiérarchique des échantillons, en utilisant le critère de Ward pour l’agglomération. Comparez les arbres d’échantillons obtenus avec ces trois métriques et choisissez celle qui vous paraît la plus pertinente.</p></li>
<li><p>Effectuez un clustering hiérarchique des gènes en utilisant la distance basée sur le coefficient de Pearson et le critère de Ward</p></li>
<li><p>Dessinez un arbre avec le résultat du clustering des gènes et commentez sa strcuture. Si vous deviez choisir de façon arbitraire un nombre de clusters, que choisiriez-vous ? Pourquoi ? Pas de panique, nous pouvons assumer ici que la réponse comporte une part de subjectivité.</p></li>
<li><p>Dessinez une heatmap du résultat, en sélectionnant les deux résultats de clustering ci-dessus pour les gènes et les échantillons.</p></li>
</ul>
<p>Interprétez les résultats en quelques phrases.</p>
</div>
<div id="enrichissement-fonctionnel" class="section level2">
<h2>Enrichissement fonctionnel</h2>
<p>Effectuez une analyse d’enrichissement fonctionnel avec les principaux clusters obtenus dans la section précédente.</p>
</div>
<div id="conclusions-générales" class="section level2">
<h2>Conclusions générales</h2>
<p>Résumez en quelques phrases vos conclusions à partir des résultats obtenus.</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWluaS1wcm9qZXQgMjAyMSAtIEV4cGxvcmF0aW9uIGRlcyBkb25uw6llcyBkZSBQYXZrb3ZpYyIKYXV0aG9yOiAiUHLDqW5vbSBOb20iCmRhdGU6ICdgciBTeXMuRGF0ZSgpYCcKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICBzZWxmX2NvbnRhaW5lZDogbm8KICAgIGNvZGVfZG93bmxvYWQ6IHllcwogICAgZmlnX2NhcHRpb246IHllcwogICAgaGlnaGxpZ2h0OiB6ZW5idXJuCiAgICB0aGVtZTogY2VydWxlYW4KICAgIHRvYzogeWVzCiAgICB0b2NfZGVwdGg6IDMKICAgIHRvY19mbG9hdDogeWVzCiAgICBjb2RlX2ZvbGRpbmc6ICJoaWRlIgogIHBkZl9kb2N1bWVudDoKICAgIGZpZ19jYXB0aW9uOiB5ZXMKICAgIGhpZ2hsaWdodDogemVuYnVybgogICAgdG9jOiB5ZXMKICAgIHRvY19kZXB0aDogMwplZGl0b3Jfb3B0aW9uczogCiAgY2h1bmtfb3V0cHV0X3R5cGU6IGNvbnNvbGUKLS0tCgoKCgpgYGB7ciBzZXR0aW5ncywgaW5jbHVkZT1GQUxTRSwgZWNobz1GQUxTRSwgZXZhbD1UUlVFfQoKb3B0aW9ucyh3aWR0aCA9IDMwMCkKIyBvcHRpb25zKGVuY29kaW5nID0gJ1VURi04JykKa25pdHI6Om9wdHNfY2h1bmskc2V0KAogIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCAKICBmaWcucGF0aCA9ICdmaWd1cmVzL3RjZ2EtYmljXycsCiAgZmlnLmFsaWduID0gImNlbnRlciIsIAogIHNpemUgPSAidGlueSIsIAogIGVjaG8gPSBUUlVFLCAKICBldmFsID0gVFJVRSwgCiAgd2FybmluZyA9IEZBTFNFLCAKICBtZXNzYWdlID0gRkFMU0UsIAogIHJlc3VsdHMgPSBUUlVFLCAKICBjb21tZW50ID0gIiIpCgpvcHRpb25zKHNjaXBlbiA9IDEyKSAjIyBNYXggbnVtYmVyIG9mIGRpZ2l0cyBmb3Igbm9uLXNjaWVudGlmaWMgbm90YXRpb24KIyBrbml0cjo6YXNpc19vdXRwdXQoIlxcZm9vdG5vdGVzaXplIikKCmBgYAoKCgpgYGB7ciBsaWJyYXJpZXMsIGVjaG89RkFMU0UsIGV2YWw9VFJVRX0KIyMjIyBMb2FkIHJlcXVpcmVkIFIgbGlicmFyaWVzICMjIyMKCiMjIENSQU4gbGlicmFyaWVzCnJlcXVpcmVkTGliIDwtIGMoImtuaXRyIikKZm9yIChsaWIgaW4gcmVxdWlyZWRMaWIpIHsKICBpZiAoIXJlcXVpcmUobGliLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpKSB7CiAgICBpbnN0YWxsLnBhY2thZ2VzKGxpYiwgKQogIH0KICByZXF1aXJlKGxpYiwgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKQp9CgoKCmBgYAoKCiMjIFN5bm9wc2lzIGR1IHByb2pldAoKCkxlIGJ1dCBkdSBwcm9qZXQgZXN0IGRlIG1ldHRyZSBlbiBvZXV2cmUgbGVzIG3DqXRob2RlcyB2dWVzIGRhbnMgbGUgbW9kdWxlIDMgIlIgZXQgc3RhdGlzdGlxdWVzIiBwb3VyIGV4cGxvcmVyIGxlIGpldSBkZSBkb25uw6llcyBkZSBQYXZva292aWMsIGV0IGRlIGZvdXJuaXIgdW4gcmFwcG9ydCBkJ2FuYWx5c2UgYXUgZm9ybWF0IFIgbWFya2Rvd24uIAoKTm91cyBmb3Vybmlzc29ucyBjaS1kZXNzb3VzIHVuZSB0cmFtZSBhdmVjIGxlcyBwcmluY2lwYWxlcyBzZWN0aW9ucyBhdHRlbmR1cy4gU2VudGV6LXZvdXMgbGlicmVzIGQnYWRhcHRlciBjZXR0ZSB0cmFtZSBvdSBkJ3kgYWpvdXRlciBkZXMgYW5hbHlzZXMgY29tcGzDqW1lbnRhaXJlcyBzaSBlbGxlcyB2b3VzIGFpZGVudCDDoCBpbnRlcnByw6l0ZXIgdm9zIHLDqXN1bHRhdHMuIAoKIyMgUmVtaXNlIGR1IHJhcHBvcnQKCkRhdGU6ICoqbGUgMTAgbWFpIDIwMjEgbWludWl0KiouICBTaSB2b3VzIGFudGljaXBleiB1biBwcm9ibMOobWUgcG91ciByZW1ldHRyZSBsZSByYXBwb3J0IMOgIGNldHRlIGRhdGUgY29udGFjdGV6LW5vdXMgYXVzc2kgcmFwaWRlbWVudCBxdWUgcG9zc2libGUgcG91ciBxdWUgbm91cyBwdWlzc2lvbnMgcHLDqXZvaXIgdW5lIHJlbWlzZSBwbHVzIHRhcmRpdmUuIAoKLSBDb21tZW5jZXogcGFyIHJlbm9tbWVyIGxlIGZpY2hpZXIgUm1kIGVuIHJlbXBsYcOnYW50IFByZW5vbS1OT00gcGFyIHZvcyBub20gZXQgcHLDqW5vbS4gCi0gTGUgcmFwcG9ydCBlc3QgYXR0ZW5kdSBlbiBmb3JtYXRzIFJtZCArIEhUTUwgKGVuIGFjdGl2YW50IGwnb3B0aW9uIHNlbGZfY29udGFpbmVkIGRlIGwnZW4tdMOqdGUpLiAKLSBEw6lwb3NleiBsZXMgZmljaGllcnMgZGFucyB1biBzb3VzLWRvc3NpZXIgZGUgdm90ZSBjb21wdGUgZHUgY2x1c3Rlci4gQXR0ZW50aW9uLCB2ZWlsbGV6IMOgIHJlc3BlY3RlciBwcsOpY2lzw6ltZW50IGNldHRlIHN0cnVjdHVyZSBkZSBjaGVtaW4gY2FyIG5vdXMgbm91cyBiYXNlcm9ucyBkZXNzdXMgcG91ciByw6ljdXDDqXJlciB2b3MgcsOpc3VsdGF0cy4gCgogICAgYC9zaGFyZWQvcHJvamVjdHMvZHViaWkyMDIxL1tsb2dpbl0vbTMtc3RhdC1SL21pbmktcHJvamV0YCAKCgojIyBDcml0w6hyZXMgZCfDqXZhbHVhdGlvbgoKLSBSZXByb2R1Y3RpYmlsaXTDqSBkZXMgYW5hbHlzZXM6IG5vdXMgdGVudGVyb25zIGRlIHJlZ8OpbsOpcmVyIGxlIHJhcHBvcnQgSFRNTCDDoCBwYXJ0aXIgZGUgdm90cmUgUm1kLCBlbiBwYXJ0YW50IGRlIG5vdHJlIGNvbXB0ZSBzdXIgbGUgc2VydmV1ciBJRkIuIAotIE1hbmlwdWxhdGlvbiBkZXMgb2JqZXRzIFIKLSBNb2JpbGlzYXRpb24gZGVzIG3DqXRob2RlcyBzdGF0aXN0aXF1ZXMgdnVlcyBhdSBjb3VycwotIFBlcnRpbmVuY2UgZGVzIGludGVycHLDqXRhdGlvbnMgc3RhdGlzdGlxdWVzCi0gUGVydGluZW5jZSBkZXMgaW50ZXJwcsOpdGF0aW9ucyBiaW9sb2dpcXVlcwotIENsYXJ0w6kgZGUgbGEgcsOpZGFjdGlvbgotIENsYXJ0w6kgZGVzIGlsbHVzdHJhdGlvbnMgKGZpZ3VyZXMgZXQgdGFibGVhdXgpOiBncmFwaGlzbWVzLCBsw6lnZW5kZXMgLi4uCgpOb3VzIHZvdXMgZW5jb3VyYWdlb25zIMOgIGFzc3VyZXIgbGEgbGlzaWJpbHBpdMOpIGRlIHZvdHJlIGNvZGUgKHN5bnRheGUsIG5vbW1hZ2UgZGVzIHZhcmlhYmxlcywgY29tbWVudGFpcmVzIGRlIGNvZGUpCgojIyBDaGFyZ2VtZW50IGRlcyBkb25uw6llcyBicnV0ZXMKCkxlIGJsb2Mgc3VpdmFudCBjb250aWVudCB1bmUgIGZvbmN0aW9uIHF1aSBwZXJtZXQgZGUgdMOpbMOpY2hhcmdlciB1biBmaWNoaWVyIGRhbnMgbCdlc3BhY2UgZGUgdHJhdmFpbCwgc2F1ZiBzJ2lsIGVzdCBkw6lqw6AgcHLDqXNlbnQuIE5vdXMgbCd1dGlsaXNlcm9ucyBlbnN1aXRlIHBvdXIgdMOpbMOpY2hhcmdlciBsZXMgZG9ubsOpZXMgw6AgYW5hbHlzZXIgZW4gw6l2aXRhbnQgZGUgcmVmYWlyZSBsZSB0cmFuc2ZlcnQgw6AgY2hhcXVlIGV4w6ljdXRpb24gZGUgbCdhbmFseXNlLiAKCmBgYHtyIGZ1bmN0aW9uX2Rvd25sb2FkX29ubHlfb25jZX0KIycgQHRpdGxlIERvd25sb2FkIGEgZmlsZSBvbmx5IGlmIGl0IGlzIG5vdCB5ZXQgaGVyZQojJyBAYXV0aG9yIEphY3F1ZXMgdmFuIEhlbGRlbiBlbWFpbHtKYWNxdWVzLnZhbi1IZWxkZW5AQGZyYW5jZS1iaW9pbmZvcm1hdGlxdWUuZnJ9CiMnIEBwYXJhbSB1cmxfYmFzZSBiYXNlIG9mIHRoZSBVUkwsIHRoYXQgd2lsbCBiZSBwcmVwZW5kZWQgdG8gdGhlIGZpbGUgbmFtZQojJyBAcGFyYW0gZmlsZV9uYW1lIG5hbWUgb2YgdGhlIGZpbGUgKHNob3VsZCBub3QgY29udGFpbiBhbnkgcGF0aCkKIycgQHBhcmFtIGxvY2FsX2ZvbGRlciBwYXRoIG9mIGEgbG9jYWwgZm9sZGVyIHdoZXJlIHRoZSBmaWxlIHNob3VsZCBiZSBzdG9yZWQKIycgQHJldHVybiB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGUgcGF0aCBvZiB0aGUgbG9jYWwgZmlsZSwgYnVpbHQgZnJvbSBsb2NhbF9mb2xkZXIgYW5kIGZpbGVfbmFtZQojJyBAZXhwb3J0wqkKZG93bmxvYWRfb25seV9vbmNlIDwtIGZ1bmN0aW9uKAogIHVybF9iYXNlLCAKICBmaWxlX25hbWUsCiAgbG9jYWxfZm9sZGVyKSB7CgogICMjIERlZmluZSB0aGUgc291cmNlIFVSTCAgCiAgdXJsIDwtIGZpbGUucGF0aCh1cmxfYmFzZSwgZmlsZV9uYW1lKQogIG1lc3NhZ2UoIlNvdXJjZSBVUkxcblx0IiwgIHVybCkKCiAgIyMgRGVmaW5lIHRoZSBsb2NhbCBmaWxlCiAgbG9jYWxfZmlsZSA8LSBmaWxlLnBhdGgobG9jYWxfZm9sZGVyLCBmaWxlX25hbWUpCiAgCiAgIyMgQ3JlYXRlIHRoZSBsb2NhbCBkYXRhIGZvbGRlciBpZiBpdCBkb2VzIG5vdCBleGlzdAogIGRpci5jcmVhdGUobG9jYWxfZm9sZGVyLCBzaG93V2FybmluZ3MgPSBGQUxTRSwgcmVjdXJzaXZlID0gVFJVRSkKICAKICAjIyBEb3dubG9hZCB0aGUgZmlsZSBPTkxZIGlmIGl0IGlzIG5vdCBhbHJlYWR5IHRoZXJlCiAgaWYgKCFmaWxlLmV4aXN0cyhsb2NhbF9maWxlKSkgewogICAgbWVzc2FnZSgiRG93bmxvYWRpbmcgZmlsZSBmcm9tIHNvdXJjZSBVUkwgdG8gbG9jYWwgZmlsZVxuXHQiLCAKICAgICAgICAgICAgbG9jYWxfZmlsZSkKICAgIGRvd25sb2FkLmZpbGUodXJsID0gdXJsLCBkZXN0ZmlsZSA9IGxvY2FsX2ZpbGUpCiAgfSBlbHNlIHsKICAgIG1lc3NhZ2UoIkxvY2FsIGZpbGUgYWxyZWFkeSBleGlzdHMsIG5vIG5lZWQgdG8gZG93bmxvYWRcblx0IiwgCiAgICAgICAgICAgIGxvY2FsX2ZpbGUpCiAgfQogIAogIHJldHVybihsb2NhbF9maWxlKQp9CmBgYAoKTm91cyB0w6lsw6ljaGFyZ2VvbnMgZGV1eCBmaWNoaWVycyBkYW5zIHVuIGRvc3NpZXIgbG9jYWwsIGV0IGxlcyBjaGFyZ2VvbnMgZGFucyBsZXMgZGF0YS5mcmFtZXMgc3VpdmFudGVzOiAKCi0gRG9ubsOpZXMgYnJ1dGVzIGRlIHRyYW5zY3JpcHRvbWU6IGBmYV9leHByX3Jhd2AKLSBNw6l0YWRvbm7DqWVzOiBgZmFfbWV0YWAKCmBgYHtyIGRvd25sb2FkX2FuZF9sb2FkfQojIyBEZWZpbmUgdGhlIHJlbW90ZSBVUkwgYW5kIGxvY2FsIGZvbGRlcgpwYXZrb3ZpY191cmwgPC0gImh0dHBzOi8vZ2l0aHViLmNvbS9EVS1CaWkvbW9kdWxlLTMtU3RhdC1SL3Jhdy9tYXN0ZXIvc3RhdC1SXzIwMjEvZGF0YS9wYXZrb3ZpY18yMDE5LyIKCiMjIERlZmluZSB0aGUgbG9jYWwgZm9sZGVyIGZvciB0aGlzIGFuYWx5c2lzICh3aGVyZSB0aGUgZGF0YSB3aWxsIGJlIGRvd25sb2FkZWQgYW5kIHRoZSByZXN1bHRzIGdlbmVyYXRlZCkKcGF2a292aWNfZm9sZGVyIDwtICJ+L20zLXN0YXQtUi9wYXZrb3ZpY19hbmFseXNpcyIKCiMjIERlZmluZSBhIHN1Yi1mb2xkZXIgZm9yIHRoZSBkYXRhCnBhdmtvdmljX2RhdGFfZm9sZGVyIDwtIGZpbGUucGF0aChwYXZrb3ZpY19mb2xkZXIsICJkYXRhIikKCiMjIERvd25sb2FkIGFuZCBsb2FkIHRoZSBleHByZXNzaW9uIGRhdGEgdGFibGUKIyMgTm90ZTogd2UgdXNlIGNoZWNrLm5hbWVzPUZBTFNFIHRvIGF2b2lkIHJlcGxhY2luZyBoeXBoZW5zIGJ5IGRvdHMKIyMgaW4gc2FtcGxlIG5hbWVzLCBiZWNhdXNlIHdlIHdhbnQgdG8ga2VlcCB0aGVtIGFzIGluIHRoZSAKIyMgb3JpZ2luYWwgZGF0YSBmaWxlcy4gCm1lc3NhZ2UoIkRvd25sb2FkaW5nIEZBIHRyYW5zY3JpcHRvbWUgZmlsZVx0IiwgImZhX3Jhd19jb3VudHMudHN2Lmd6IiwKICAiXG5cdGZyb21cdCIsIHBhdmtvdmljX3VybCkKZmFfZXhwcl9maWxlIDwtIGRvd25sb2FkX29ubHlfb25jZSgKICB1cmxfYmFzZSA9IHBhdmtvdmljX3VybCwgCiAgZmlsZV9uYW1lID0gImZhX3Jhd19jb3VudHMudHN2Lmd6IiwKICBsb2NhbF9mb2xkZXIgPSBwYXZrb3ZpY19kYXRhX2ZvbGRlcikKCiMjIExvYWQgdGhlIGV4cHJlc2RzaW9uIHRhYmxlCm1lc3NhZ2UoIkxvYWRpbmcgRkEgdHJhbnNjcmlwdG9tZSBkYXRhIGZyb21cblx0IiwgZmFfZXhwcl9maWxlKQpmYV9leHByX3JhdyA8LSByZWFkLmRlbGltKGZpbGUgPSBmYV9leHByX2ZpbGUsIAogICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IFRSVUUsIAogICAgICAgICAgICAgICAgICAgICAgIHJvdy5uYW1lcyA9IDEpCiMgY29sbmFtZXMoZmFfZXhwcl9yYXcpCiMgZGltKGZhX2V4cHJfcmF3KQojIFZpZXcoaGVhZChmYV9leHByX3JhdykpCgojIyBEb3dubG9hZCB0aGUgbWV0YWRhdGEgZmlsZQptZXNzYWdlKCJEb3dubG9hZGluZyBGQSBtZXRhZGF0YSBmaWxlXHQiLCAiZmFfdHJhbnNjcmlwdG9tZV9tZXRhZGF0YS50c3YiLAogICJcblx0ZnJvbVx0IiwgcGF2a292aWNfdXJsKQpmYV9tZXRhX2ZpbGUgPC0gZG93bmxvYWRfb25seV9vbmNlKAogIHVybF9iYXNlID0gcGF2a292aWNfdXJsLCAKICBmaWxlX25hbWUgPSAiZmFfdHJhbnNjcmlwdG9tZV9tZXRhZGF0YS50c3YiLAogIGxvY2FsX2ZvbGRlciA9IHBhdmtvdmljX2RhdGFfZm9sZGVyKQoKIyMgTG9hZCB0aGUgbWV0YWRhdGEKbWVzc2FnZSgiTG9hZGluZyBGQSBtZXRhZGF0YSBmcm9tXG5cdCIsIGZhX21ldGFfZmlsZSkKZmFfbWV0YSA8LSByZWFkLmRlbGltKGZpbGUgPSBmYV9tZXRhX2ZpbGUsIAogICAgICAgICAgICAgICAgICAgICAgIGhlYWRlciA9IFRSVUUsIAogICAgICAgICAgICAgICAgICAgICAgIHJvdy5uYW1lcyA9IDEpCgojIFZpZXcoZmFfbWV0YSkKa2FibGUoZmFfbWV0YSwgY2FwdGlvbiA9ICJNZXRkYXRhIGZvciBQYXZrb3ZvYyBGQSB0cmFuc2NyaXB0b21lIikKYGBgCgoKCgojIyBUcmFuc2Zvcm1hdGlvbiBsb2cyCgpBcHBsaXF1ZXogdW5lIHRyYW5zZm9ybWF0aW9uIGxvZzIgZGVzIGRvbm7DqWVzIGJydXRlcywgYXByw6hzIGF2b2lyIGFqb3V0w6kgdW4gZXBzaWxvbiAkXGVwc2lsb24gPSAxJCAobGVzIHZhbGV1cnMgbnVsbGVzIHNlcm9udCBkb25jIHJlcHLDqXNlbnTDqWVzIHBhciB1biBsb2cyKGNvdW50cykgdmFsYW50ICQwJC4gU3RvY2tleiBsZSByw6lzdWx0YXQgZGFucyB1bmUgZGF0YS5mcmFtZSBub21tw6llIGBmYV9leHByX2xvZzJgLgoKQWZmY2hleiB1biBmcmFnbWVudCBkZXMgdGFibGVhdXggYGZhX2V4cHJfcmF3YCBldCBgZmFfZXhwcl9sb2cyYCBlbiBzw6lsZWN0aW9ubmFudCBsZXMgbGlnbmVzIDEwMCDDoCAxMDkgZXQgbGVzIGNvbG9ubmVzIDUgw6AgMTAsIGFmaW4gZGUgdm91cyBhc3N1cmVyIHF1ZSBsYSB0cmFuc2Zvcm1hdGlvbiBsb2cyIGEgYmllbiBmb25jdGlvbm7DqS4gCgpgYGB7ciBsb2cyX3RyYW5zZm9ybX0KIyMgTG9nMiB0cmFuc2Zvcm1hdGlvbiBvZiB0aGUgdHJhbnNjcmlwdG9tZSBkYXRhCmVwc2lsb24gPC0gMQpmYV9leHByX2xvZzIgPC0gbG9nMihmYV9leHByX3JhdyArIGVwc2lsb24pCiMgZGltKGZhX2V4cHJfbG9nMikKIyBWaWV3KGhlYWQoZmFfZXhwcl9sb2cyKSkKCiMjIERpc3BsYXkgb2YgYSBmcmFnbWVudCBvZiB0aGUgZGF0YSBiZWZvcmUgYW5kIGFmdGVyIGxvZzIgdHJhbnNmb3JtYXRpb24Ka2FibGUoZmFfZXhwcl9yYXdbMTAwOjEwOSwgNToxMF0sIGNhcHRpb24gPSAiRnJhZ21lbnQgZGVzIGRvbm7DqWVzIHRyYW5zY3JpcHRvbWlxdWVzIGJydXRlcyIpCmthYmxlKGZhX2V4cHJfbG9nMlsxMDA6MTA5LCA1OjEwXSwgY2FwdGlvbiA9ICJGcmFnbWVudCBkZXMgZG9ubsOpZXMgdHJhbnNjcmlwdG9taXF1ZXMgYXByw6hzIHRyYW5zZm9ybWF0aW9uIGxvZzIiKQpgYGAKCgojIyBTdGF0aXN0aXF1ZXMgZGVzY3JpcHRpdmVzCgpOb3VzIHZvdXMgZGVtYW5kb25zIGRlIGNyw6llciB1biBkYXRhLmZyYW1lIHF1aSBjb2xsZWN0ZXJhIGxlcyBzdGF0aXN0aXF1ZXMgcGFyIGfDqG5lIGV0IHBhciDDqWNoYW50aWxsb24uIAoKIyMjIChDbGFpcmUpOiBwcsOpcGFyZSBsZXMgcXVlc3Rpb25zICMjIwoKCiMjIyBTdGF0aXN0aXF1ZXMgcGFyIMOpY2hhbnRpbGxvbiBhdmFudCBub3JtYWxpc2F0aW9uCgpDcsOpZXogdW5lIGRhdGEuZnJhbWUgbm9tbcOpZSBgZ2VuZV9zdGF0X3ByZW5vcm1gIHF1aSBjb21wb3J0ZXJhIHVuZSBsaWduZSBwYXIgZ8OobmUgZXQgdW5lIGNvbG9ubmUgcGFyIHN0YXRpc3RpcXVlLCBldCBjYWxjdWxleiBsZXMgc3RhdGlzdGlxdWVzIHN1aXZhbnRlcyBzdXIgbGVzIHZhbGV1cnMgbG9nMiBkZSBjaGFxdWUgZ8OobmUuIAoKLSBtb3llbm5lCi0gbcOpZGlhbmUKLSDDqWNhcnQtdHlwZQotIHByZW1pZXIgcXVhcnRpbGUKLSB0cm9pc2nDqG1lIHF1YXJ0aWxlCi0gbWF4aW11bQotIG5vbWJyZSBkZSB2YWxldXJzIG51bGxlcwotIGludGVydmFsbGUgaW50ZXItcXVhcnRpbGVzCgpDZXMgcsOpc3VsdGF0cyBzZXJvbnQgc290Y2vDqXMgZGFucyB1biBkYXRhLmZyYW1lIGF2ZWMgMSBsaWduZSBwYXIgw6ljaGFudGlsbG9uIGV0IDEgY29sb25uZSBwYXIgc3RhdGlzdGlxdWUsIHF1aSBzZXJhIGFmZmljaMOpIGF2ZWMgbGEgZm9uY3Rpb24gYGthYmxlKClgIChuJ291YmxpZXogcGFzIGxhIGzDqWdlbmRlKS4gCgpBZmZpY2hleiBsZXMgbGlnbmVzIDEwMCDDoCAxMDkgZGUgY2UgdGFibGVhdSBkZSBzdGF0aXN0aXF1ZXMuIAoKYGBge3IgZ2VuZV9zdGF0X3ByZV9ub3JtfQojIyBHZW5lLXdpc2Ugc3RhdGlzdGljcyBiZWZvcmUgbm9ybWFsaXNhdGlvbgpnZW5lX3N0YXRfcHJlbm9ybSA8LSBkYXRhLmZyYW1lKAogIG1lYW4gPSBhcHBseShmYV9leHByX3JhdywgMSwgbWVhbiksCiAgbWVkaWFuID0gYXBwbHkoZmFfZXhwcl9yYXcsIDEsIG1lZGlhbiksCiAgc2QgPSBhcHBseShmYV9leHByX3JhdywgMSwgc2QpLAogIFExID0gYXBwbHkoZmFfZXhwcl9yYXcsIDEsIHF1YW50aWxlLCBwID0gMC4yNSksCiAgUTMgPSBhcHBseShmYV9leHByX3JhdywgMSwgcXVhbnRpbGUsIHAgPSAwLjc1KSwKICBtYXggPSBhcHBseShmYV9leHByX3JhdywgMSwgbWF4KSwKICBudWxsID0gYXBwbHkoZmFfZXhwcl9yYXcgPT0gMCwgMSwgc3VtKSwKICBpcXIgPSBhcHBseShmYV9leHByX3JhdywgMSwgSVFSKQopCgprYWJsZShnZW5lX3N0YXRfcHJlbm9ybVsxMDA6MTA5LCBdLCBjYXB0aW9uID0gIkdlbmUtd2lzZSBzdGF0aXN0aWNzIGJlZm9yZSBub3JtYWxpc2F0aW9uLiIpCgpgYGAKCgoKCiMjIEZpbHRyYWdlIGV0IG5vcm1hbGlzYXRpb24gZGVzIGRvbm7DqWVzCgpOb3VzIGZvdXJuaXNzb25zIGNpLWRlc3NvdXMgbGUgY29kZSBwb3VyIG5vcm1hbGlzZXIgbGVzIGRvbm7DqWVzLCBlbiBzdGFuZGFyZGlzYW50IGxlIDPDqG1lIHF1YW50aWxlLiAKCkxhIG3DqXRob2RlIGNob2lzaWUgaWNpIGNvbnNpc3RlIMOgIAoKLSDDqWNhcnRlciBsZXMgZ8OobmVzICJub24tZMOpdGVjdMOpcyIsIGMnZXN0IC3DoC1kaXJlIGNldXggYXlhbnQgZGVzIHZhbGV1cnMgbnVsbGVzIGRhbnMgYXUgbW9pbnMgOTAlIGRlcyDDqWNoYW50aWxsb25zOwoKLSDDqWNhcnRlciBsZXMgZ8OobmVzIMOgIHBlaW5lIGV4cHJpbcOpcywgYydlc3Qtw6AtZGlyZSBjZXV4IGF5YW50IHVuZSB2YWxldXIgbW95ZW5uZSA8IDEwIChhcmJpdHJhaXJlbWVudCk7CgotIHN0YW5kYXJkaXNlciBsZXMgw6ljaGFudGlsbG9ucyBzdXIgbGUgM8OobWUgcXVhcnRpbGUgZGVzIHZhbGV1cnMgbm9uLW51bGxlcy4gTm91cyB2b3VzIHJhcHBlbG9ucyBxdWUgZCdhdXRyZXMgbcOpdGhvZGVzIHBsdXMgw6lsYWJvcsOpZXMgb250IMOpdMOpIHZ1ZXMgZGFucyBsZXMgbW9kdWxlcyA0IGV0IDUsIG1haXMgbm91cyBhdm9ucyBjaG9pc2kgaWNpIHVuZSBzb2x1dGlvbiBzaW1wbGUgdG91dCBlbiDDqXRhbnQgcm9idXN0ZS4gCgpgYGB7ciBnZW5lX2ZpbHRlcmluZ30KIyMgRGF0YSBmaWx0ZXJpbmc6IGdlbmVzIGhhdmluZyBhdCBsZWFzdCA5MCUgbnVsbCB2YWx1ZXMKdW5kZXRlY3RlZF9nZW5lcyA8LSBnZW5lX3N0YXRfcHJlbm9ybSRudWxsID49IG5jb2woZmFfZXhwcl9yYXcpICogMC45CnByaW50KHBhc3RlMCgiVW5kZXRlY3RlZCBnZW5lcyAobnVsbCBpbiA+PSA5MCUgc2FtcGxlcyk6ICIsIHN1bSh1bmRldGVjdGVkX2dlbmVzKSkpCgojIyBEYXRhIGZpbHRlcmluZzogZ2VuZXMgaGF2aW5nIGEgbWVhbiBleHByZXNzaW9uIDwgMTAKYmFyZWx5X2V4cHJlc3NlZF9nZW5lcyA8LSBnZW5lX3N0YXRfcHJlbm9ybSRtZWFuIDwgMTAKcHJpbnQocGFzdGUwKCJCYXJlbHkgZXhwcmVzc2VkIGdlbmVzIChtZWFuIDwgMTApOiAiLCBzdW0oYmFyZWx5X2V4cHJlc3NlZF9nZW5lcykpKQoKIyMgQXBwbHkgZmlsdGVyaW5nIG9uIGJvdGggY3JpdGVyaWEKZGlzY2FyZGVkX2dlbmVzIDwtIHVuZGV0ZWN0ZWRfZ2VuZXMgfCBiYXJlbHlfZXhwcmVzc2VkX2dlbmVzCnByaW50KHBhc3RlMCgiRGlzY2FyZGVkIGdlbmVzOiAiLCBzdW0oZGlzY2FyZGVkX2dlbmVzKSkpCmtlcHRfZ2VuZXMgPC0gIWRpc2NhcmRlZF9nZW5lcwpwcmludChwYXN0ZTAoIktlcHQgZ2VuZXM6ICIsIHN1bShrZXB0X2dlbmVzKSkpCgojIyBHZW5lcyBhZnRlciBmaWx0ZXJpbmcKZmFfZXhwcl9sb2cyX2ZpbHRlcmVkIDwtIGZhX2V4cHJfbG9nMltrZXB0X2dlbmVzLCBdCgpgYGAKCgpgYGB7ciBzYW1wbGVfc3RhbmRhcmRpc2F0aW9ufQojIyBHZW5lcmF0ZSBhIGRhdGEgZnJhbWUgd2hlcmUgbnVsbCB2YWx1ZXMgYXJlIHJlcGxhY2VkIGJ5IE5BCmZhX2V4cHJfbm9udWxsIDwtIGZhX2V4cHJfbG9nMl9maWx0ZXJlZApmYV9leHByX25vbnVsbFtmYV9leHByX2xvZzJfZmlsdGVyZWQgPD0gMF0gPC0gTkEKc3VtKGlzLm5hKGZhX2V4cHJfbm9udWxsKSkKCiMjIENvbXB1dGUgdGhlIDNyZCBxdWFydGlsZSBvZiBub24tbnVsbCB2YWx1ZXMgZm9yIGVhY2ggc2FtcGxlCnNhbXBsZV9xM19ub251bGwgPC0gYXBwbHkoZmFfZXhwcl9ub251bGwsIDIsIHF1YW50aWxlLCBwcm9iID0gMC43NSwgbmEucm0gPSBUUlVFKQojIHByaW50KHNhbXBsZV9xM19ub251bGwpCgojIyBDb21wdXRlIHRoZSBBMyBmb3IgYWxsIHRoZSB2YWx1ZXMsIHdoaWNoIHdpbGwgc2VydmUgYXMgdGFyZ2V0IHZhbHVlIGZvciB0aGUgc3RhbmRhcmRpc2VkIHNhbXBsZSBRMwphbGxfcTNfbm9udWxsIDwtIHF1YW50aWxlKHVubGlzdChmYV9leHByX25vbnVsbCksIHByb2IgPSAwLjc1LCBuYS5ybSA9IFRSVUUpCiMgcHJpbnQoYWxsX3EzX25vbnVsbCkKCiMjIFN0YW5kYXJkaXNlIGV4cHJlc3Npb24gb24gIHRoZSB0aGlyZCBxdWFydGlsZSBvZiBub24tbnVsbCB2YWx1ZXMKIyMgQmV3YXJlIDogZm9yIHRoaXMgc3RhbmRhcmRpemF0aW9uIHdlIGtlZXAgdGhlIG51bGwgdmFsdWVzCiMjCiMjIFRyaWNrIDogSSB0cmFuc3Bvc2UgdGhlIHRhYmxlIHRvIGFwcGx5IHRoZSByYXRpbyBzYW1wbGUgcGVyIHNhbXBsZSwgCiMjIGFuZCB0aGVuIHRyYW5zcG9zZSB0aGUgcmVzdWx0IHRvIGdldCB0aGUgZ2VuZXMgaW4gcm93cyBhbmQgc2FtcGxlcyBpbiBjb2x1bW5zCmZhX2V4cHJfbG9nMl9zdGFuZGFyZCA8LSB0KHQoZmFfZXhwcl9sb2cyX2ZpbHRlcmVkKSAvIHNhbXBsZV9xM19ub251bGwgKiBhbGxfcTNfbm9udWxsKQojIHF1YW50aWxlKHVubGlzdChmYV9leHByX2xvZzJfc3RhbmRhcmQpLCBwcm9icyA9IDAuNzUsIG5hLnJtID0gVFJVRSkKCiMjIEkgYWxzbyBjb21wdXRlIHRoZSB2YWx1ZXMgZm9yIHRoZSAibm9udWxsIiB0YWJsZSBmb3IgCiMjIHRoZSBzYWtlIG9mIGNvbXBhcmlzb24gYW5kIHRvIGNoZWNrIHRoYXQgdGhlIHRoaXJkIHF1YW50aWxlcyBvZiBub24tbnVsbCAKIyMgdmFsdWVzIGFyZSB3ZWxsIGlkZW50aWNhbCBhY3Jvc3Mgc2FtcGxlcy4KZmFfZXhwcl9sb2cyX3N0YW5kYXJkX25vbnVsbCA8LSB0KHQoZmFfZXhwcl9ub251bGwpIC8gc2FtcGxlX3EzX25vbnVsbCAqIGFsbF9xM19ub251bGwpCiMgcXVhbnRpbGUodW5saXN0KGZhX2V4cHJfbG9nMl9zdGFuZGFyZF9ub251bGwpLCBwcm9icyA9IDAuNzUsIG5hLnJtID0gVFJVRSkKCiMjIENvbXB1dGUgMyBiZWZvcmUgYW5kIGFmdGVyIHN0YW5kYXJkaXNhdGlvbiwgaW5jbHVkaW5nIG9yIG5vdCB0aGUgbnVsbCB2YWx1ZXMKc3RhbmRhcmRpc2F0aW9uX2ltcGFjdCA8LSBkYXRhLmZyYW1lKAogIGJlZm9yZV9hbGwgPSBhcHBseShmYV9leHByX2xvZzJfZmlsdGVyZWQsIDIsIHF1YW50aWxlLCBwcm9iID0gIDAuNzUsIG5hLnJtID0gVFJVRSksCiAgYmVmb3JlX25vbnVsbCA9IGFwcGx5KGZhX2V4cHJfbm9udWxsLCAyLCBxdWFudGlsZSwgcHJvYiA9ICAwLjc1LCBuYS5ybSA9IFRSVUUpLAogIGFmdGVyX25vbnVsID0gYXBwbHkoZmFfZXhwcl9sb2cyX3N0YW5kYXJkX25vbnVsbCwgMiwgcXVhbnRpbGUsIHByb2IgPSAgMC43NSwgbmEucm0gPSBUUlVFKSwKICBhZnRlcl9hbGwgPSBhcHBseShmYV9leHByX2xvZzJfc3RhbmRhcmQsIDIsIHF1YW50aWxlLCBwcm9iID0gIDAuNzUsIG5hLnJtID0gVFJVRSkKKQoKCiMjIE5vdGU6IGFmdGVyIHN0YW5kYXJkaXphdGlvbiB0aGUgUTMgb2YgdGhlIGRhdGEgd2Ugd2lsbCB1c2Ugc2hvdyBzb21lIHZhcmlhdGlvbnMgCiMjIGJlY2F1c2Ugd2UgY29tcHV0ZSB0aGVtIGhlcmUgd2l0aCB0aGUgbnVsbCB2YWx1ZXMKa2FibGUoc3RhbmRhcmRpc2F0aW9uX2ltcGFjdCwgY2FwdGlvbiA9ICJJbXBhY3Qgb2Ygc3RhbmRhcmRpemF0aW9uIG9uIHRoZSB0aGlyZCBxdWFudGlsZSAoUTMpIHBlciBzYW1wbGUuIFRoaXJkIHF1YW50aWxlcyBhcmUgY29tcHV0ZWQgYmVmb3JlIGFuZCBhZnRlciBzdGFuZGFyZGlzYXRpb24sIHdpdGggZWl0aGVyIGFsbCB0aGUgdmFsdWVzIG9mIHRoZSBmaWx0ZXJlZCB0YWJsZSwgb3Igb25seSB0aGUgbm9uLW51bGwgdmFsdWVzLiAiKQoKYGBgCgoKIyMjIFN0YXRpc3RpcXVlcyBwYXIgZ8OobmUgYXByw6hzIG5vcm1hbGlzYXRpb24sIGV0IGFubm90YXRpb24gZGVzIGfDqG5lcwoKCkfDqW7DqXJleiB1biBkYXRhLmZyYW1lIGF2ZWMgdW5lIGxpZ25lIHBhciBnw6huZSDDoCBwYXJ0aXIgZHUgdGFibGVhdSBkZSBkb25uw6llcyBub3JtYWxpc8OpZXMsIGF2ZWMgbGVzIHN0YXRpc3RpcXVlcyBzdWl2YW50ZXMgKHVuZSBzdGF0aXN0aXF1ZSBwYXIgY29sb25uZSk6CgotIG1veWVubmUKLSDDqWNhcnQtdHlwZQotIGNvZWZmaWNpZW50IGRlIHZhcmlhdGlvbgotIG1pbmltdW0KLSBtw6lkaWFuZQotIG1heGltdW0KCkFqb3V0ZXogdW5lIGNvbG9ubmUgYXZlYyBsZXMgYW5ub3RhdGlvbnMgYmlvbWFydCBkZSBjaGFxdWUgZ8OobmUvIAoKQWZmaWNoZXogbGVzIGxpZ25lcyAxMDAgw6AgMTA5IGRlIGNlIHRhYmxlYXUgZGUgc3RhdGlzdGlxdWVzLiAKCgpgYGB7ciBnZW5lX3N0YXRfcG9zdF9ub3JtfQojIyBTdGF0IHBlciBnZW5lIGFmdGVyIG5vcm1hbGlzYXRpb24KIyMgR2VuZS13aXNlIHN0YXRpc3RpY3MgYmVmb3JlIG5vcm1hbGlzYXRpb24KZ2VuZV9zdGF0X25vcm0gPC0gZGF0YS5mcmFtZSgKICBtZWFuID0gYXBwbHkoZmFfZXhwcl9sb2cyX3N0YW5kYXJkLCAxLCBtZWFuKSwKICBzZCA9IGFwcGx5KGZhX2V4cHJfbG9nMl9zdGFuZGFyZCwgMSwgc2QpKQpnZW5lX3N0YXRfbm9ybSRWID0gZ2VuZV9zdGF0X25vcm0kc2QgLyBnZW5lX3N0YXRfbm9ybSRtZWFuCmdlbmVfc3RhdF9ub3JtJG1pbiA9IGFwcGx5KGZhX2V4cHJfbG9nMl9zdGFuZGFyZCwgMSwgbWluKQpnZW5lX3N0YXRfbm9ybSRtZWRpYW4gPSBhcHBseShmYV9leHByX2xvZzJfc3RhbmRhcmQsIDEsIG1lZGlhbikKZ2VuZV9zdGF0X25vcm0kbWF4ID0gYXBwbHkoZmFfZXhwcl9sb2cyX3N0YW5kYXJkLCAxLCBtYXgpCgprYWJsZShnZW5lX3N0YXRfbm9ybVsxMDA6MTA5LCBdLCBjYXB0aW9uID0gIkdlbmUtd2lzZSBzdGF0aXN0aWNzIGFmdGVyIG5vcm1hbGlzYXRpb24uIikKCgpgYGAKCgojIyBEaXN0cmlidXRpb24gZGVzIGRvbm7DqWVzCgotIERlc3NpbmV6IGxhIGRpc3RyaWJ1dGlvbiBkZXMgdmFsZXVycyBhcHLDqHMgbm9ybWFsaXNhdGlvbiAodG91cyDDqWNoYW50aWxsb25zIGNvbmZvbmR1cykKCmBgYHtyIGZhX2V4cHJfbm9ybV9kaXN0cmliLCBmaWcud2lkdGg9OCwgZmlnLmhlaWdodD01LCBvdXQud2lkdGg9IjcwJSIsIGZpZy5jYXA9IkRpc3RyaWJ1dGlvbiBvZiBleHByZXNzaW9uIHZhbHVlcyAobG9nMiBjb3VudHMpIGFmdGVyIGdlbmUgZmlsdGVyaW5nIGFuZCBzdGFuZGFyZGlzYXRpb24gb24gdGhlIHNhbXBsZS13aXNlIHRoaXJkLXF1YXJ0aWxlIG9mIG5vbi1udWxsIHZhbHVlcy4gVGhlIHZlcnRpY2FsIGxpbmUgaGlnaGxpZ2h0cyB0aGUgbWVhbiB2YWx1ZS4gIn0KaGlzdCh1bmxpc3QoZmFfZXhwcl9sb2cyX3N0YW5kYXJkKSwgCiAgICAgYnJlYWtzID0gc2VxKGZyb20gPSAwLCB0byA9IG1heChmYV9leHByX2xvZzJfc3RhbmRhcmQpICsgMSwgYnkgPSAwLjI1KSwKICAgICB4bGFiID0gImxvZzIoY291bnRzKSBhZnRlciBzdGFuZGFyZGlzYXRpb24iLCAKICAgICB5bGFiID0gIm51bWJlciBvZiBnZW5lcyBhZnRlciBmaWx0ZXJpbmciLAogICAgIGNvbCA9ICIjQkJEREZGIiwKICAgICBsYXMgPSAxLCBjZXguYXhpcyA9IDAuOCwKICAgICBtYWluID0gImRpc3RyaWJ1dGlvbiBhZnRlciBzdGFuZGFyZGlzYXRpb24iKQphYmxpbmUodiA9IG1lYW4oZmFfZXhwcl9sb2cyX3N0YW5kYXJkKSwgY29sID0gImRhcmtncmVlbiIsIGx3ZCA9IDIpCgpgYGAKCgotIERlc3NpbmV6IHVuIGJveCBwbG90IGRlcyDDqWNoYW50aWxsb25zIGF2YW50IGV0IGFwcsOocyBub3JtYWxpc2F0aW9uLCBldCBjb21tZW50ZXogbGEgZmHDp29uIGRvbnQgbCdlZmZldCBkZSBsYSBub3JtYWxpc2F0aW9uIGFwcGFyYcOudCBzdXIgY2VzIGdyYXBoaXF1ZXMuIAoKYGBge3IgYm94cGxvdHNfc3RhbmRhcmRpc2F0aW9uX2ltcGFjdCwgZmlnLndpZHRoPTEwLCBmaWcuaGVpZ2h0PTEyLCBvdXQud2lkdGg9IjEwMCUiLCBmaWcuY2FwPSJCb3ggcGxvdHMgc2hvd2luZyB0aGUgaW1wYWN0IG9mIG5vcm1hbGlzYXRpb24ifQojIyMjIEJveCBwbG90cyB0byBzaG93IG5vcm1hbGlzYXRpb24gaW1wYWN0ICMjIyMKcGFyKG1hciA9IGMoNCw2LDQsMSkpICMjIFNldCB0aGUgbWFyZ2lucwpwYXIobWZyb3cgPSBjKDIsMikpCmJveHBsb3QoZmFfZXhwcl9sb2cyX2ZpbHRlcmVkLCAKICAgICAgICBob3Jpem9udGFsID0gVFJVRSwKICAgICAgICB4bGFiID0gImxvZzIoY291bnRzKSIsIAogICAgICAgIGxhcyA9IDEsIAogICAgICAgIGNvbCA9IGZhX21ldGEkY29sb3IsIAogICAgICAgIG1haW4gPSAiQmVmb3JlIHN0YW5kYXJkaXNhdGlvblxuYWxsIHZhbHVlcyIpCmJveHBsb3QoZmFfZXhwcl9ub251bGwsIAogICAgICAgIGhvcml6b250YWwgPSBUUlVFLCAKICAgICAgICB4bGFiID0gImxvZzIoY291bnRzKSIsIAogICAgICAgIGxhcyA9IDEsIAogICAgICAgIGNvbCA9IGZhX21ldGEkY29sb3IsIAogICAgICAgIG1haW4gPSAiQmVmb3JlIHN0YW5kYXJkaXNhdGlvblxuemVyb3MgZGlzY2FyZGVkIikKYm94cGxvdChmYV9leHByX2xvZzJfc3RhbmRhcmRfbm9udWxsLCAKICAgICAgICBob3Jpem9udGFsID0gVFJVRSwgCiAgICAgICAgeGxhYiA9ICJsb2cyKGNvdW50cykiLCAKICAgICAgICBsYXMgPSAxLCAKICAgICAgICBjb2wgPSBmYV9tZXRhJGNvbG9yLCAKICAgICAgICBtYWluID0gIlN0YW5kYXJkaXNlZFxuemVyb3MgZGlzY2FyZGVkIikKYm94cGxvdChmYV9leHByX2xvZzJfc3RhbmRhcmQsIAogICAgICAgIHhsYWIgPSAibG9nMihjb3VudHMpIiwgCiAgICAgICAgbGFzID0gMSwgCiAgICAgICAgaG9yaXpvbnRhbCA9IFRSVUUsIAogICAgICAgIGNvbCA9IGZhX21ldGEkY29sb3IsIAogICAgICAgIG1haW4gPSAiU3RhbmRhcmRpc2VkXG5hbGwgdmFsdWVzIikKcGFyKG1mcm93ID0gYygxLCAxKSkKcGFyKG1hciA9IGMoNCw1LDUsMSkpCgpgYGAKCiMjIEZpbHRyYWdlCgpQb3VyIHLDqWR1aXJlIGxlIG5vbWJyZSBkZSBnw6huZXMsIG5vdXMgYWxsb25zIMOpY2FydGVyIGxlcyBnw6huZXMgZmFpYmxlbWVudCBleHByaW3DqXMgKGxvZzIgbW95ZW4gaW5mw6lyaWV1ciDDoCA0KSwgZXQgbmUgcmV0ZW5pciBxdWUgY2V1eCBxdWkgbW9udHJlbnQgZGVzIHZhcmlhdGlvbnMgaW1wb3J0YW50ZXMgZW50cmUgw6ljaGFudGlsbG9ucy4gUG91ciBjZSBkZXJuaWVyIGNyaXTDqHJlICwgbm91cyBub3VzIGJhYXNvbnMgc3VyIG5sZSBjb2VmZmljaWVudCBkZSB2YXJpYXRpb24sIGFmaW4gZGUgcmVsYXRpdmlzZXIgbGEgZGlzcGVyc2lvbiAow6ljYXJ0IHR5cGUpIHBhciByYXBwb3J0IMOgIGxhIHRlbmRhbmNlIGNlbnRyYWxlIChtb3llbm5lKS4gCgpTw6lsZWN0aW9ubmV6IGxlcyBnw6huZXMgYXlhbnQgdW4gbml2ZWF1IGxvZzIgbW95ZW4gbWluaW1hbCBzdXDDqXJpZXVyIMOgIDMgKCRzID4gMyQpIGV0IHVuIGNvZWZmaWNpZW50IGRlIHZhcmlhdGlvbiBzdXDDqXJpZXVyIMOgIDAuNSAoJFYgPiAwLjUkKS4gTm90ZTogY2VzIHZhbGV1cnMgc29udCBwYXJmYWl0ZW1lbnQgYXJiaXRyYWlyZXMsIGVsbGVzIG9udCDDqXJ0w6kgY2hvaXNpZXMgcG91ciBvYnRlbmlyIHVuIG5vbWJyZSByYWlzb25uYWJsZSBkZSBnw6huZXMuIAoKCmBgYHtyIGdlbmVfc2VsZWN0aW9ufQojIyMjIEdlbmUgc2VsZWN0aW9uICMjIyMKCiMjIENvbXB1dGUgYSBCb29sZWFuIHZlY3RvciBpbmRpY2F0aW5nIHdoZXRoZXIgZWFjaCBnZW5lIHBhc3NlcyBvciBub3QgdGhlIGV4cHJlc3Npb24gbGV2ZWwgdGhyZXNob2xkCmhpZ2hfZXhwcmVzc2lvbiA8LSBnZW5lX3N0YXRfbm9ybSRtZWFuID4gMwojIHRhYmxlKGhpZ2hfZXhwcmVzc2lvbikgIyBjb3VudCBudW1iZXIgb2YgZ2VuZXMgd2l0aCBoaWdoL3dlYWsgZXhwcmVzc2lvbgoKIyMgQ29tcHV0ZSBhIEJvb2xlYW4gdmVjdG9yIGluZGljYXRpbmcgd2hldGhlciBlYWNoIGdlbmUgcGFzc2VzIG9yIG5vdCB0aGUgdmFyaWF0aW9uIGNvZWZmaWNpZW50IHRocmVzaG9sZApoaWdoX3ZhcmlhdGlvbiA8LSBnZW5lX3N0YXRfbm9ybSRWID4gMC41CiMgdGFibGUoaGlnaF92YXJpYXRpb24pICMgY291bnQgbnVtYmVyIG9mIGdlbmVzIHdpdGggd2VhayBoaWdoIGNvZWZmZmljaWVudCBvZiB2YXJpYXRpb24KCiMjIFNlbGVjdCBnZW5lcyBoYXZpbmcgYm90aCBhIGhpZ2ggbWVhbiBleHByZXNzaW9uIGFuZCBhIGhpZ2ggdmFyaWF0aW9uIGNvZWZmaWNpZW4Kc2VsZWN0ZWRfZ2VuZXMgPC0gaGlnaF92YXJpYXRpb24gJiBoaWdoX2V4cHJlc3Npb24KIyB0YWJsZShzZWxlY3RlZF9nZW5lcykgIyBjb3VudCBudW1iZXIgb2YgZ2VuZXMgd2l0aCB3ZWFrIGhpZ2ggY29lZmZmaWNpZW50IG9mIHZhcmlhdGlvbgpwcmludChwYXN0ZTAoIlNlbGVjdGVkIGdlbmVzOiAiLCBzdW0oc2VsZWN0ZWRfZ2VuZXMpKSkKCiMjIENyZWF0ZSBhIGRhdGEgZnJhbWUgd2l0aCB0aGUgZXhwcmVzc2lvbiBvZiB0aGUgc2VsZWN0ZWQgZ2VuZXMKZmFfZXhwcl9zZWxlY3RlZCA8LSBmYV9leHByX2xvZzJfc3RhbmRhcmRbc2VsZWN0ZWRfZ2VuZXMsIF0KCmBgYAoKRGVzc2luZXogZGVzIGhpc3RvZ3JhbW1lcyBkZXMgdmFsZXVycyBkJ2V4cHJlc3Npb24gYXZhbnQgZXQgYXByw6hzIGNldHRlIHPDqWxlY3Rpb24gZGUgZ8OobmVzLCBldCBjb21tZW50ZXogbGVzIGRpZmbDqXJlbmNlcy4gCgpgYGB7ciBoaXN0X2V4cHJfc2VsZWN0ZWRfZ2VuZXMsIGZpZy53aWR0aD03LCBmaWcuaGVpZ2h0PTgsIG91dC53aWR0aD0iNjAlIiwgZmlnLmNhcD0iRGlzdHJpYnV0aW9uIG9mIGV4cHJlc3Npb24gdmFsdWVzIGJlZm9yZSBhbmQgYWZ0ZXIgZ2VuZSBzZWxlY3Rpb24ifQojIyMjIEhpc3RvZ3JhbXMgb2YgZXhwcmVzc2lvbiBiZWZvcmUgYW5kIGFmdGVyIGdlbmUgc2VsZWN0aW9uICMjIyMKCnBhcihtZnJvdz1jKDIsMSkpCmhpc3QodW5saXN0KGZhX2V4cHJfbG9nMl9zdGFuZGFyZCksIAogICAgIGJyZWFrcyA9IHNlcShmcm9tID0gMCwgdG8gPSBtYXgoZmFfZXhwcl9sb2cyX3N0YW5kYXJkKSArIDEsIGJ5ID0gMC4yNSksCiAgICAgbWFpbiA9ICJGaWx0ZXJlZCBnZW5lcyIsCiAgICAgY29sID0gICIjRERCQkZGIikKCmhpc3QodW5saXN0KGZhX2V4cHJfc2VsZWN0ZWQpLCAKICAgICBicmVha3MgPSBzZXEoZnJvbSA9IDAsIHRvID0gbWF4KGZhX2V4cHJfbG9nMl9zdGFuZGFyZCkgKyAxLCBieSA9IDAuMjUpLAogICAgIG1haW4gPSAiU2VsZWN0ZWQgZ2VuZXMiLAogICAgIGNvbCA9ICAiI0ZGRERCQiIpCgpwYXIobWZyb3c9YygxLDEpKQoKCiMgIyMgU29tZSBxdWljayBjaGVja3M6IHRoZSBzZWxlY3Rpb24gb2YgaGlnaGx5IHZhcmlhYmxlIGdlbmVzIHNlbGVjdCB0aG9zZSBoYXZpbmcgbWFueSB6ZXJvcyAtIGFuZCBoaWdoIHZhbHVlcyBpbiBvdGhlciBzYW1wbGVzCiMgaGlzdCh1bmxpc3QoZmFfZXhwcl9sb2cyX2ZpbHRlcmVkW2hpZ2hfZXhwcmVzc2lvbiwgXSksIGJyZWFrcz0xMDApCiMgaGlzdCh1bmxpc3QoZmFfZXhwcl9sb2cyX2ZpbHRlcmVkW2hpZ2hfdmFyaWF0aW9uLCBdKSwgYnJlYWtzPTEwMCkKIyBoaXN0KHVubGlzdChmYV9leHByX2xvZzJfZmlsdGVyZWRbIWhpZ2hfdmFyaWF0aW9uLCBdKSwgYnJlYWtzPTEwMCkKIyBoaXN0KHVubGlzdChmYV9leHByX2xvZzJfZmlsdGVyZWRbc2VsZWN0ZWRfZ2VuZXMsIF0pLCBicmVha3M9MTAwKQoKYGBgCgoKYGBge3IgYm94cGxvdHNfZXhwcl9zZWxlY3RlZF9nZW5lc30KIyMjIyBIaXN0b2dyYW0gb2YgZXhwcmVzc2lvbiBhZnRlciBnZW5lIHNlbGVjdGlvbiAjIyMjCgpwYXIobWZyb3c9YygyLDEpKQpoaXN0KHVubGlzdChmYV9leHByX2xvZzJfc3RhbmRhcmQpLCAKICAgICBicmVha3MgPSBzZXEoZnJvbSA9IDAsIHRvID0gbWF4KGZhX2V4cHJfbG9nMl9zdGFuZGFyZCkgKyAxLCBieSA9IDAuMjUpLAogICAgIGxhcyA9IDEsIGNleC5heGlzID0gMC43LCAKICAgICBtYWluID0gIkZpbHRlcmVkIGdlbmVzIiwKICAgICBjb2wgPSAgIiNCQkRERkYiKQoKaGlzdCh1bmxpc3QoZmFfZXhwcl9zZWxlY3RlZCksIAogICAgIGJyZWFrcyA9IHNlcShmcm9tID0gMCwgdG8gPSBtYXgoZmFfZXhwcl9sb2cyX3N0YW5kYXJkKSArIDEsIGJ5ID0gMC4yNSksCiAgICAgbGFzID0gMSwgY2V4LmF4aXMgPSAwLjcsIAogICAgIG1haW4gPSAiU2VsZWN0ZWQgZ2VuZXMiLAogICAgIGNvbCA9ICAiIzg4RkZCQiIpCgpwYXIobWZyb3c9YygxLDEpKQoKCgpgYGAKCgojIyBBQ1AKCkRlc3NpbmV6IHVuIHBsb3QgQUNQIGRlcyDDqWNoYW50aWxsb25zIGVuIGxlcyBjb2xvcmFudCBwYXIgY29uZGl0aW9uLiAKCi0gYXZlYyBsYSBtYXRyaWNlIGQnZXhwcmVzc2lvbiBpbml0aWFsZSAoJGZhX2V4cHIkKQotIGF2ZWMgbGEgbWF0cmljZSBmaW5hbGUgKHRyYW5zZm9ybWF0aW9uIGxvZzIsIGZpbHRyZSBkZXMgZ8OobmVzIG5vbi1kw6l0ZWN0w6lzLCBzdGFuZGFyZGlzYXRpb24gZXQgc8OpbGVjdGlvbiBkZXMgZ8OobmVzIGZvcnRlbWVudCBleHByaW3DqXMgZXQgYS3DoCBoYXV0IGNvZWZmaWNpZW50IGRlIHZhcmlhdGlvbikKCmBgYHtyIH0KIyMjIyBQQyBwbG90cyAjIyMjCgoKYGBgCgojIyBDbHVzdGVyaW5nCgotIENhbGN1bGV6IGxlcyBtYXRyaWNlcyBkZSBkaXN0YW5jZSBlbnRyZSDDqWNoYW50aWxsb25zLCBlbiB1dGlsaXNhbnQgcmVzcGVjdGl2ZW1lbnQgbGVzIGRpc3RhbmNlcyBldWNsaWRpZW5uZSwgY29lZmZpY2llbnQgZGUgUGVhcnNvbiAgZXQgZGUgU3BlYXJtYW4uIAoKCgpgYGB7ciBzYW1wbGVfZGlzdGFuY2VzfQoKYGBgCgoKCi0gRWZmZWN0dWV6IHVuIGNsdXN0ZXJpbmcgaGnDqXJhcmNoaXF1ZSBkZXMgw6ljaGFudGlsbG9ucywgZW4gdXRpbGlzYW50IGxlIGNyaXTDqHJlIGRlIFdhcmQgcG91ciBsJ2FnZ2xvbcOpcmF0aW9uLiBDb21wYXJleiBsZXMgYXJicmVzIGQnw6ljaGFudGlsbG9ucyBvYnRlbnVzIGF2ZWMgY2VzIHRyb2lzIG3DqXRyaXF1ZXMgZXQgY2hvaXNpc3NleiBjZWxsZSBxdWkgdm91cyBwYXJhw650IGxhIHBsdXMgcGVydGluZW50ZS4KCgoKYGBge3Igc2FtcGxlX2NsdXN0ZXJpbmd9CgpgYGAKCgotIEVmZmVjdHVleiB1biBjbHVzdGVyaW5nIGhpw6lyYXJjaGlxdWUgZGVzIGfDqG5lcyBlbiB1dGlsaXNhbnQgbGEgZGlzdGFuY2UgYmFzw6llIHN1ciBsZSBjb2VmZmljaWVudCBkZSBQZWFyc29uIGV0IGxlIGNyaXTDqHJlIGRlIFdhcmQKCmBgYHtyIGdlbmVfY2x1c3RlcmluZ30KCmBgYAoKCi0gRGVzc2luZXogdW4gYXJicmUgYXZlYyBsZSByw6lzdWx0YXQgZHUgY2x1c3RlcmluZyBkZXMgZ8OobmVzIGV0IGNvbW1lbnRleiBzYSBzdHJjdXR1cmUuIFNpIHZvdXMgZGV2aWV6IGNob2lzaXIgZGUgZmHDp29uIGFyYml0cmFpcmUgdW4gbm9tYnJlIGRlIGNsdXN0ZXJzLCBxdWUgY2hvaXNpcmllei12b3VzID8gUG91cnF1b2kgPyBQYXMgZGUgcGFuaXF1ZSwgbm91cyBwb3V2b25zIGFzc3VtZXIgaWNpIHF1ZSBsYSByw6lwb25zZSBjb21wb3J0ZSB1bmUgcGFydCBkZSBzdWJqZWN0aXZpdMOpLiAKCmBgYHtyIGdlbmVfdHJlZX0KCmBgYAoKCi0gRGVzc2luZXogdW5lIGhlYXRtYXAgZHUgcsOpc3VsdGF0LCBlbiBzw6lsZWN0aW9ubmFudCBsZXMgZGV1eCByw6lzdWx0YXRzIGRlIGNsdXN0ZXJpbmcgY2ktZGVzc3VzIHBvdXIgbGVzIGfDqG5lcyBldCBsZXMgw6ljaGFudGlsbG9ucy4gCgpgYGB7ciBiaWNsdXN0ZXJpbmd9CgpgYGAKCgpJbnRlcnByw6l0ZXogbGVzIHLDqXN1bHRhdHMgZW4gcXVlbHF1ZXMgcGhyYXNlcy4gCgoKIyMgRW5yaWNoaXNzZW1lbnQgZm9uY3Rpb25uZWwKCkVmZmVjdHVleiB1bmUgYW5hbHlzZSBkJ2VucmljaGlzc2VtZW50IGZvbmN0aW9ubmVsIGF2ZWMgbGVzIHByaW5jaXBhdXggY2x1c3RlcnMgb2J0ZW51cyBkYW5zIGxhIHNlY3Rpb24gcHLDqWPDqWRlbnRlLiAKCmBgYHtyIGZ1bmN0aW9uYWxfZW5yaWNobWVudH0KCmBgYAoKIyMgQ29uY2x1c2lvbnMgZ8OpbsOpcmFsZXMKCgpSw6lzdW1leiBlbiBxdWVscXVlcyBwaHJhc2VzIHZvcyBjb25jbHVzaW9ucyDDoCBwYXJ0aXIgZGVzIHLDqXN1bHRhdHMgb2J0ZW51cy4gCgoKCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Prenom-NOM_m3-stat-R_mini-projet.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
